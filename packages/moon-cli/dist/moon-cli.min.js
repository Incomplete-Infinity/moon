#!/usr/bin/env node
/**
 * Moon CLI v1.0.0-beta.3
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(){"use strict";var c=require("fs"),s=require("path"),t=require("https"),o=require("child_process").exec,u=process.argv[2],r=process.argv[3]||"kbrsh/moon-template",e={method:"GET",host:"api.github.com",path:"/repos/"+r+"/tarball/master",headers:{"User-Agent":"Node.js"}},d=/{# MoonName #}/g;function l(e,t){console.log("\x1b[34m"+e+"\x1b[0m "+t)}function n(e){var t=s.join(__dirname,"moon-template.tar.gz"),n=c.createWriteStream(t);e.on("data",function(e){n.write(e)}),e.on("end",function(){n.end(),l("download",r),function(t){var n=s.join(process.cwd(),u);o("mkdir "+n,function(e){if(e)throw e;o("tar -xzf "+t+" -C "+n+" --strip=1",function(e){if(e)throw e;l("install",n),function(t,n){c.unlink(t,function(e){if(e)throw e;l("clean",t),function e(t,n){var o=c.readdirSync(t);for(var r=0;r<o.length;r++){var i=o[r],a=s.join(t,i);c.statSync(a).isDirectory()?e(a,n):(c.writeFileSync(a,c.readFileSync(a).toString().replace(d,u)),l("create",s.relative(n,a)))}}(n,n),l("success",'Generated project "'+u+'"'),console.log("To start, run:\n\tcd "+u+"\n\tnpm install\n\tnpm run dev")})}(t,n)})})}(t)})}l("Moon","Generating project"),t.get(e,function(e){300<=e.statusCode&&e.statusCode<400&&void 0!==e.headers.location?t.get(e.headers.location,function(e){n(e)}):n(e)})}();