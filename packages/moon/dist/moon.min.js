/**
 * Moon v1.0.0-beta.7
 * Copyright 2016-2020 Kabir Shah
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,n){"undefined"==typeof module?e.Moon=n():module.exports=n()}(this,(function(){"use strict";var e={};function n(n){e=n}var t={route:location.pathname},r={get:function(){return t},set:function(e){t=e}},o=null,a={get:function(){return o},set:function(e){o=e}};function u(t){return function(){for(var r in S)e[r]=S[r].get();for(var o in n(H(t(e))),S)S[o].set(e[o])}}function i(){}Node.prototype.MoonChildren=null,Node.prototype.MoonReferenceEvents=null,i.prototype.handleEvent=function(e){this[e.type]()};var c={audio:{"*currentTime":{key:"currentTime",value:function(e,n,t){return e},event:"timeupdate",handler:function(e,n,t){return u((function(t){return e(t,n.currentTime)}))}},"*muted":{key:"muted",value:function(e,n,t){return e},event:"volumechange",handler:function(e,n,t){return u((function(t){return e(t,n.muted)}))}},"*paused":{key:"paused",value:function(e,n,t){return e},event:"pause",handler:function(e,n,t){return u((function(t){return e(t,n.paused)}))}},"*playbackRate":{key:"playbackRate",value:function(e,n,t){return e},event:"ratechange",handler:function(e,n,t){return u((function(t){return e(t,n.playbackRate)}))}},"*volume":{key:"volume",value:function(e,n,t){return e},event:"volumechange",handler:function(e,n,t){return u((function(t){return e(t,n.volume)}))}}},input:{"*checked":{key:"checked",value:function(e,n,t){return e},event:"change",handler:function(e,n,t){return u((function(t){return e(t,n.checked)}))}},"*radio":{key:"checked",value:function(e,n,t){return e===t.value},event:"change",handler:function(e,n,t){return u((function(n){return e(n,t.value)}))}},"*value":{key:"value",value:function(e,n,t){return e},event:"input",handler:function(e,n,t){return u((function(t){return e(t,n.value)}))}}},video:{"*currentTime":{key:"currentTime",value:function(e,n,t){return e},event:"timeupdate",handler:function(e,n,t){return u((function(t){return e(t,n.currentTime)}))}},"*muted":{key:"muted",value:function(e,n,t){return e},event:"volumechange",handler:function(e,n,t){return u((function(t){return e(t,n.muted)}))}},"*paused":{key:"paused",value:function(e,n,t){return e},event:"pause",handler:function(e,n,t){return u((function(t){return e(t,n.paused)}))}},"*playbackRate":{key:"playbackRate",value:function(e,n,t){return e},event:"ratechange",handler:function(e,n,t){return u((function(t){return e(t,n.playbackRate)}))}},"*volume":{key:"volume",value:function(e,n,t){return e},event:"volumechange",handler:function(e,n,t){return u((function(t){return e(t,n.volume)}))}}}},l={};function s(e,n,t,r){this.name=e,this.data=n,this.children=t,this.references=r}var f=new s("div",{id:"moon-root"},[],{}),v=document.getElementById("moon-root");function d(e,n){return(e in l?l[e]:l[e]="text"===e?document.createTextNode(""):document.createElement(e))[n]}function h(e){var n,t=e.name;if("text"===t)(n=document.createTextNode(e.data.data)).MoonChildren=[];else{var r=(n=document.createElement(t)).MoonChildren=[],o=e.data,a=e.children,u=e.references;for(var i in o)m(n,i,o[i]);for(var c=0;c<a.length;c++)r.push(n.appendChild(h(a[c])));for(var l in u)g(n,t,o,l,u[l])}return n}function m(e,n,t){switch(n){case"attributes":for(var r in t)e.setAttribute(r,t[r]);break;case"style":var o=e.style;for(var a in t)o[a]=t[a];break;case"class":e.className=t;break;case"for":e.htmlFor=t;break;case"children":break;default:var i=n[0];"*"!==i&&("o"===i&&"n"===n[1]?e[n.toLowerCase()]=u(t):e[n]=t)}}function p(e,n,t,r){switch(n){case"attributes":for(var o in r){var a=r[o];o in t&&a===t[o]||e.setAttribute(o,a)}for(var i in t)i in r||e.removeAttribute(i);break;case"style":var c=e.style;for(var l in r){var s=r[l];l in t&&s===t[l]||(c[l]=s)}for(var f in t)f in r||(c[f]="");break;case"class":e.className=r;break;case"for":e.htmlFor=r;break;case"children":break;default:var v=n[0];"*"!==v&&("o"===v&&"n"===n[1]?e[n.toLowerCase()]=u(r):e[n]=r)}}function b(e,n,t,r){switch(r){case"attributes":for(var o in t.attributes)e.removeAttribute(o);break;case"class":e.className="";break;case"for":e.htmlFor="";break;case"children":break;default:var a=r[0];"*"!==a&&("o"===a&&"n"===r[1]?e[r.toLowerCase()]=null:e[r]=d(n,r))}}function g(e,n,t,r,o){var a=c[n][r],u=a.event,l=e.MoonReferenceEvents;null===l&&(l=e.MoonReferenceEvents=new i),e[a.key]=a.value(o.get,e,t),l[u]=a.handler(o.set,e,t),e.addEventListener(u,l)}function y(e,n,t,r,o,a){var u=c[n][r],i=a.get;o.get!==i&&(e[u.key]=u.value(i,e,t)),o.value!==a.value&&(e.MoonReferenceEvents[u.event]=u.handler(a.set,e,t))}function k(e,n,t){var r=c[n][t],o=r.key,a=r.event,u=e.MoonReferenceEvents;e[o]=d(n,o),u[a]=null,e.removeEventListener(a,u)}function w(e){!function e(n,t,r,o){if(t!==r){var a=r.name;if(t.name!==a){var u=n.parentNode;u.replaceChild(u.MoonChildren[o]=h(r),n)}else{var i=t.data,c=t.children,l=t.references,s=r.data,f=r.children,v=r.references;if(i!==s){for(var d in s)if(d in i){var w=i[d],E=s[d];w!==E&&p(n,d,w,E)}else m(n,d,s[d]);for(var R in i)R in s||b(n,a,i,R)}if(c!==f){var x=n.MoonChildren,C=c.length,M=f.length,T=0;if(C===M)for(;T<C;T++)e(x[T],c[T],f[T],T);else if(C<M){for(;T<C;T++)e(x[T],c[T],f[T],T);for(;T<M;T++)x.push(n.appendChild(h(f[T])))}else{for(;T<M;T++)e(x[T],c[T],f[T],T);for(;T<C;T++)n.removeChild(x.pop())}}if(l!==v){for(var L in v)if(L in l){var N=l[L],q=v[L];N!==q&&y(n,a,s,L,N,q)}else g(n,a,s,L,v[L]);for(var A in l)A in v||k(n,a,A)}}}}(v,f,e,0),f=e}v.MoonChildren=[];var E={get:function(){return f},set:w},R=Date.now;function x(e,n){setTimeout(u(n),e)}var C=localStorage,M=/^([^:]+):\s*([^]*?)\s*$/gm,T={},L={};function N(e,n,t){var r=new XMLHttpRequest;if(r.responseType="responseType"in n?n.responseType:"text",r.onload=function(){for(var n,o={},a=r.getAllResponseHeaders();null!==(n=M.exec(a));)o[n[1]]=n[2];t({status:r.status,headers:o,body:r.response}),e in T&&T[e]()},r.onerror=function(){t({status:0,headers:null,body:null}),e in L&&L[e]()},r.open("method"in n?n.method:"GET",n.url),"headers"in n){var o=n.headers;for(var a in o)r.setRequestHeader(a,o[a])}r.send("body"in n?n.body:null)}var q={};function A(e){return function(n){e.response=n}}function F(){return null!==event&&event instanceof MouseEvent?{x:event.clientX,y:event.clientY}:null}var H,S={root:r,data:a,view:E,time:{get:R,set:function(){}},storage:{get:function(){return C},set:function(e){for(var n in e){var t=e[n];n in C&&t===C[n]||(C[n]=t)}for(var r in C)r in e||delete C[r]}},http:{get:function(){return q},set:function(e){for(var n in q=e){var t=q[n];null===t.response.status&&N(n,t.request,A(t))}}},point:{get:F,set:function(){}}};function X(){for(var t in S)e[t]=S[t].get();for(var r in n(H(e)),S)S[r].set(e[r])}var j={view:{View:s,viewRoot:f,viewPatch:w},time:{timeNow:R,timeWait:x},storage:{storageState:C},http:{httpEventsLoad:T,httpEventsError:L,httpRequest:N},point:{pointCoordinates:F}},B=[],D={};function G(e){return function(n){return function(t){var r;if("children"in n){var o=n.children;r=[];for(var a=0;a<o.length;a++)t=o[a](t),r.push(t.view)}else r=B;return t.view=new s(e,n,r,D),t}}}function I(e){return function(n){return function(t){return t.view=new s(e,n,B,D),t}}}function P(e){return function(n){return function(t){var r={};for(var o in n)if("*"===o[0]){var a=n[o];r[o]={value:a.value,get:a.get(t),set:a.set}}return t.view=new s(e,n,B,r),t}}}for(var V=G("div"),W=["a","abbr","acronym","address","applet","article","aside","b","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","button","canvas","caption","center","cite","code","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","html","i","iframe","image","ins","isindex","kbd","label","legend","li","listing","main","map","mark","marquee","math","menu","menuitem","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","tt","u","ul","var","xmp"],Y=["area","base","br","col","embed","hr","img","keygen","link","meta","param","source","text","track","wbr"],$=["audio","input","video"],z={root:function(e){return function(n){var t=n.root.route;return t!==location.pathname&&history.pushState(null,"",t),V(e)(n)}},router:function(e){return function(n){for(var t=n.root.route,r="/",o=1;o<t.length;o++){var a=t[o];"/"===a?(e=(r in e?e[r]:e["/*"])[1],r="/"):r+=a}return(r in e?e[r]:e["/*"])[0](n)}},timer:function(e){return function(n){for(var t in e)x(t,e[t]);return n}},httper:function(e){return function(n){var t=n.http;for(var r in e){var o=e[r];"onLoad"in o&&(T[r]=u(o.onLoad)),"onError"in o&&(L[r]=u(o.onError)),t[r]={request:o,response:{status:null,headers:null,body:null}}}return n}}},J=0;J<W.length;J++){var K=W[J];z[K]=G(K)}for(var O=0;O<Y.length;O++){var Q=Y[O];z[Q]=I(Q)}for(var U=0;U<$.length;U++){var Z=$[U];z[Z]=P(Z)}return{main:function(e){H=e,X()},event:u,run:X,wrappers:j,drivers:S,components:z,version:"1.0.0-beta.7"}}));