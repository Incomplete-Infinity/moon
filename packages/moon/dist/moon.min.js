/**
 * Moon v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,function(){"use strict";var t,o,e={driver:{input:function(){return t},output:function(e){t=e}}};function i(e){var t={};for(var r in o)t[r]=o[r].input();var n=e(t);for(var a in n)o[a].output(n[a])}function c(e,t,r){this.node=e,this.element=t,this.children=r}function s(e,t){this.name=e,this.data=t}var F={};function H(e,t,r){if("ariaset"===t)for(var n in r)e.setAttribute("aria-"+n,r[n]);else{var a=e[t];for(var o in r)a[o]=r[o]}}function R(e,t,r,n){for(var a in r)if(!(a in n))switch(t){case"ariaset":e.removeAttribute("aria-"+a);break;case"dataset":delete e.dataset[a];break;default:e.style[a]=""}}var l=null;function j(){}function D(e){var t,r=e.name,n=[];if("text"===r)t=document.createTextNode(e.data.data);else{t=document.createElement(r);var a=e.data;for(var o in a){var i=a[o];if(64===o.charCodeAt(0)){var s=t.MoonEvent;null===s&&(s=t.MoonEvent=new j),s[o]=i,t.addEventListener(o.slice(1),s)}else switch(o){case"ariaset":case"dataset":case"style":H(t,o,i);break;case"focus":i&&t.focus();break;case"class":t.className=i;break;case"for":t.htmlFor=i;break;case"children":for(var l=0;l<i.length;l++){var u=D(i[l]);n.push(u),t.appendChild(u.element)}break;default:t[o]=i}}}return new c(e,t,n)}j.prototype.handleEvent=function(e){i(this["@"+(l=e).type])},Node.prototype.MoonEvent=null;for(var r=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],n={node:function(t){return function(e){return new s(t,e)}}},a=function(e){var t=r[e];n[t]=function(e){return new s(t,e)}},u=0;u<r.length;u++)a(u);var d={input:function(){return Date.now()},output:function(t){function e(e){setTimeout(function(){i(t[e])},e)}for(var r in t)e(r)}},f=null,v=/^([^:]+):\s*([^]*?)\s*$/gm;return{data:e,http:{driver:{input:function(){return f},output:function(o){for(var e=function(e){var n=o[e],a=new XMLHttpRequest;if(a.responseType="responseType"in n?n.responseType:"text",a.onload=function(){for(var e,t={},r=a.getAllResponseHeaders();null!==(e=v.exec(r));)t[e[1]]=e[2];f={status:a.status,headers:t,body:a.response},"onLoad"in n&&i(n.onLoad)},a.onerror=function(){f=null,"onError"in n&&i(n.onError)},a.open("method"in n?n.method:"GET",n.url),"headers"in n){var t=n.headers;for(var r in t)a.setRequestHeader(r,t[r])}a.send("body"in n?n.body:null)},t=0;t<o.length;t++)e(t)}}},run:i,time:{driver:d},use:function(e){o=e},view:{driver:function(e){"string"==typeof e&&(e=document.querySelector(e));for(var t=e.attributes,r={},n=0;n<t.length;n++){var a=t[n];r[a.name]=a.value}var o=new c(new s(e.tagName.toLowerCase(),r,[]),e,[]);return{input:function(){return l},output:function(e){!function e(t,r){var n,a,o=t.node;if(o!==r){var i=o.name;if(i!==(t.node=r).name){var s=t.element,l=D(r),u=l.element;t.element=u,t.children=l.children,s.parentNode.replaceChild(u,s)}else{var c=o.data,d=r.data;if(c!==d){var f=t.element;for(var v in d){var m=c[v],p=d[v];if(m!==p)if(64===v.charCodeAt(0)){var h=f.MoonEvent;null===h&&(h=f.MoonEvent=new j),v in h?h[v]=p:(h[v]=p,f.addEventListener(v.slice(1),h))}else switch(v){case"ariaset":case"dataset":case"style":H(f,v,p),void 0!==m&&R(f,v,m,p);break;case"focus":p?f.focus():f.blur();break;case"class":f.className=p;break;case"for":f.htmlFor=p;break;case"children":var b=t.children,g=b.length,k=p.length;if(g===k)for(var y=0;y<g;y++)e(b[y],p[y]);else if(k<g){for(var w=0;w<k;w++)e(b[w],p[w]);for(var E=k;E<g;E++)f.removeChild(b.pop().element)}else{for(var x=0;x<g;x++)e(b[x],p[x]);for(var C=g;C<k;C++){var M=D(p[C]);b.push(M),f.appendChild(M.element)}}break;default:f[v]=p}}for(var L in c)if(!(L in d))if(64===L.charCodeAt(0)){var N=f.MoonEvent;delete N[L],f.removeEventListener(L.slice(1),N)}else switch(L){case"ariaset":case"dataset":case"style":R(f,L,c[L],{});break;case"focus":c.focus&&f.blur();break;case"class":f.className="";break;case"for":f.htmlFor="";break;case"children":for(var q=t.children,A=q.length,T=0;T<A;T++)f.removeChild(q.pop().element);break;default:n=i,f[a=L]=n in F?F[n][a]:(F[n]=document.createElement(n))[a]}}}}}(o,e)}}},m:n}}});