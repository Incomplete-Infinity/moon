/**
 * Moon v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,function(){"use strict";var t,o,e={driver:{input:function(){return t},output:function(e){t=e}}};function i(e){var t={};for(var a in o)t[a]=o[a].input();var r=e(t);for(var n in r)o[n].output(r[n])}function c(e,t,a){this.node=e,this.element=t,this.children=a}function s(e,t){this.name=e,this.data=t}var H={};function R(e,t,a){if("ariaset"===t)for(var r in a)e.setAttribute("aria-"+r,a[r]);else{var n=e[t];for(var o in a)n[o]=a[o]}}function j(e,t,a,r){for(var n in a)if(!(n in r))switch(t){case"ariaset":e.removeAttribute("aria-"+n);break;case"dataset":delete e.dataset[n];break;default:e.style[n]=""}}var l=null;function D(){}function G(e){var t,a=e.name,r=[];if("text"===a)t=document.createTextNode(e.data.value);else{t=document.createElement(a);var n=e.data;for(var o in n){var i=n[o];if(64===o.charCodeAt(0)){var s=t.MoonEvent;null===s&&(s=t.MoonEvent=new D),s[o]=i,t.addEventListener(o.slice(1),s)}else switch(o){case"ariaset":case"dataset":case"style":R(t,o,i);break;case"focus":i&&t.focus();break;case"class":t.className=i;break;case"for":t.htmlFor=i;break;case"children":for(var l=0;l<i.length;l++){var u=G(i[l]);r.push(u),t.appendChild(u.element)}break;default:t[o]=i}}}return new c(e,t,r)}D.prototype.handleEvent=function(e){i(this["@"+(l=e).type])},Node.prototype.MoonEvent=null;for(var a=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],r={},n=function(e){var t=a[e];r[t]=function(e){return new s(t,e)}},u=0;u<a.length;u++)n(u);var d={input:function(){return Date.now()},output:function(t){function e(e){setTimeout(function(){i(t[e])},e)}for(var a in t)e(a)}},f=null,v=/^([^:]+):\s*([^]*?)\s*$/gm;return{data:e,http:{driver:{input:function(){return f},output:function(o){for(var e=function(e){var r=o[e],n=new XMLHttpRequest;if(n.responseType="responseType"in r?r.responseType:"text",n.onload=function(){for(var e,t={},a=n.getAllResponseHeaders();null!==(e=v.exec(a));)t[e[1]]=e[2];f={status:n.status,headers:t,body:n.response},"onLoad"in r&&i(r.onLoad)},n.onerror=function(){f=null,"onError"in r&&i(r.onError)},n.open("method"in r?r.method:"GET",r.url),"headers"in r){var t=r.headers;for(var a in t)n.setRequestHeader(a,t[a])}n.send("body"in r?r.body:null)},t=0;t<o.length;t++)e(t)}}},run:i,time:{driver:d},use:function(e){o=e},view:{driver:function(e){"string"==typeof e&&(e=document.querySelector(e));for(var t=e.attributes,a={},r=0;r<t.length;r++){var n=t[r];a[n.name]=n.value}var o=new c(new s(e.tagName.toLowerCase(),a,[]),e,[]);return{input:function(){return l},output:function(e){!function e(t,a){var r,n,o=t.node;if(o!==a){var i=o.name;if(i!==(t.node=a).name){var s=t.element,l=G(a),u=l.element;t.element=u,t.children=l.children,s.parentNode.replaceChild(u,s)}else if("text"===i){var c=a.data.value;o.data.value!==c&&(t.element.data=c)}else{var d=o.data,f=a.data;if(d!==f){var v=t.element;for(var m in f){var p=d[m],h=f[m];if(p!==h)if(64===m.charCodeAt(0)){var b=v.MoonEvent;null===b&&(b=v.MoonEvent=new D),m in b?b[m]=h:(b[m]=h,v.addEventListener(m.slice(1),b))}else switch(m){case"ariaset":case"dataset":case"style":R(v,m,h),void 0!==p&&j(v,m,p,h);break;case"focus":h?v.focus():v.blur();break;case"class":v.className=h;break;case"for":v.htmlFor=h;break;case"children":var g=t.children,k=g.length,y=h.length;if(k===y)for(var w=0;w<k;w++)e(g[w],h[w]);else if(y<k){for(var E=0;E<y;E++)e(g[E],h[E]);for(var x=y;x<k;x++)v.removeChild(g.pop().element)}else{for(var C=0;C<k;C++)e(g[C],h[C]);for(var M=k;M<y;M++){var L=G(h[M]);g.push(L),v.appendChild(L.element)}}break;default:v[m]=h}}for(var N in d)if(!(N in f))if(64===N.charCodeAt(0)){var q=v.MoonEvent;delete q[N],v.removeEventListener(N.slice(1),q)}else switch(N){case"ariaset":case"dataset":case"style":j(v,N,d[N],{});break;case"focus":d.focus&&v.blur();break;case"class":v.className="";break;case"for":v.htmlFor="";break;case"children":for(var A=t.children,T=A.length,F=0;F<T;F++)v.removeChild(A.pop().element);break;default:r=i,v[n=N]=r in H?H[r][n]:(H[r]=document.createElement(r))[n]}}}}}(o,e)}}},m:r}}});