/**
 * Moon v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,function(){"use strict";var i,e={driver:function(t){return{input:function(){return t},output:function(e){t=e}}}};function n(e){var t={};for(var a in i)t[a]=i[a].input();var n=e(t);for(var r in n)i[r].output(n[r])}function f(e,t,a){this.node=e,this.element=t,this.children=a}function o(e,t,a){this.name=e,this.data=t,this.children=a}var q={};function D(e,t,a){if("ariaset"===t)for(var n in a)e.setAttribute("aria-"+n,a[n]);else{var r=e[t];for(var i in a)r[i]=a[i]}}function S(e,t,a,n){for(var r in a)if(!(r in n))switch(t){case"ariaset":e.removeAttribute("aria-"+r);break;case"dataset":delete e.dataset[r];break;default:e.style[r]=""}}var s=null;function j(){}function z(e){var t,a=e.name,n=[];if("text"===a)t=document.createTextNode(e.data[""]);else{t=document.createElement(a);for(var r=e.children,i=0;i<r.length;i++){var o=z(r[i]);n.push(o),t.appendChild(o.element)}var s=e.data;for(var c in s){var u=s[c];if(64===c.charCodeAt(0)){var l=t.MoonEvent;null===l&&(l=t.MoonEvent=new j),l[c]=u,t.addEventListener(c.slice(1),l)}else switch(c){case"ariaset":case"dataset":case"style":D(t,c,u);break;case"focus":u&&t.focus();break;case"class":t.className=u;break;case"for":t.htmlFor=u;break;default:t[c]=u}}}return new f(e,t,n)}j.prototype.handleEvent=function(e){n(this["@"+(s=e).type])},Node.prototype.MoonEvent=null;var t={input:function(){return Date.now()},output:function(t){function e(e){setTimeout(function(){n(t[e])},e)}for(var a in t)e(a)}};return{data:e,run:n,time:{driver:t},use:function(e){i=e},view:{driver:function(e){"string"==typeof e&&(e=document.querySelector(e));for(var t=e.attributes,a={},n=0;n<t.length;n++){var r=t[n];a[r.name]=r.value}var i=new f(new o(e.tagName.toLowerCase(),a,[]),e,[]);return{input:function(){return s},output:function(e){!function e(t,a){var n,r,i=t.node;if(i!==a){var o=i.name;if(o!==(t.node=a).name){var s=t.element,c=z(a),u=c.element;t.element=u,t.children=c.children,s.parentNode.replaceChild(u,s)}else if("text"===o){var l=a.data[""];i.data[""]!==l&&(t.element.data=l)}else{var f=i.data,v=a.data;if(f!==v){var d=t.element;for(var h in v){var m=f[h],p=v[h];if(m!==p)if(64===h.charCodeAt(0)){var b=d.MoonEvent;null===b&&(b=d.MoonEvent=new j),h in b?b[h]=p:(b[h]=p,d.addEventListener(h.slice(1),b))}else switch(h){case"ariaset":case"dataset":case"style":D(d,h,p),void 0!==m&&S(d,h,m,p);break;case"focus":p?d.focus():d.blur();break;case"class":d.className=p;break;case"for":d.htmlFor=p;break;default:d[h]=p}}for(var k in f)if(!(k in v))if(64===k.charCodeAt(0)){var w=d.MoonEvent;delete w[k],d.removeEventListener(k.slice(1),w)}else switch(k){case"ariaset":case"dataset":case"style":S(d,k,f[k],{});break;case"focus":f.focus&&d.blur();break;case"class":d.className="";break;case"for":d.htmlFor="";break;default:n=o,d[r=k]=n in q?q[n][r]:(q[n]=document.createElement(n))[r]}}var E=a.children;if(i.children!==E){var y=t.children,C=y.length,M=E.length;if(C===M)for(var N=0;N<C;N++)e(y[N],E[N]);else{var g=t.element;if(M<C){for(var A=0;A<M;A++)e(y[A],E[A]);for(var x=M;x<C;x++)g.removeChild(y.pop().element)}else{for(var L=0;L<C;L++)e(y[L],E[L]);for(var F=C;F<M;F++){var T=z(E[F]);y.push(T),g.appendChild(T.element)}}}}}}}(i,e)}}},m:function(e,t,a){return new o(e,t,a)}}}});