/**
 * Moon v1.0.0-beta.2
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,function(){"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t,n){var o=n[e],c=n[t-1],r=t-e;if(0==r)return null;if(1==r)return"tagOpen"===o.type&&!0===o.closed?{type:o.value,attributes:o.attributes,children:[]}:null;if("tagOpen"!==o.type||"tagClose"!==c.type||o.value!==c.value)return null;var a=function e(t,n,o){if(0==n-t)return[];for(var c=t+1;c<=n;c++){var r=u(t,c,o);if(null!==r){var a=e(c,n,o);if(null!==a)return[r].concat(i(a))}}return null}(e+1,t-1,n);return null===a?null:{type:o.value,attributes:o.attributes,children:a}}var ee=function(e){return"m".concat(e)},te=function(e,t){return"".concat(ee(e),"=").concat(t)},ne=function(e){return e.expression?e.value:'"'.concat(e.value,'"')},oe=function(e,t){return"m.rc(".concat(ee(e),",").concat(ee(t),");")},ce=function(e,t,n,o,c,r){return"m.df(".concat(e,",").concat(ee(t),",").concat(n,",").concat(ee(o),",").concat(ee(c),",").concat(ee(r),");")},re=function(e,t,n){return null===n?function(e,t){return"m.ac(".concat(ee(e),",").concat(ee(t),");")}(e,t):function(e,t,n){return"m.ib(".concat(ee(e),",").concat(ee(t),",").concat(ee(n),");")}(e,n,t)},f=function e(t,n,o,c){switch(t.type){case"If":for(var r=o.nextElement++,a=o.nextElement++,i=o.nextElement++,u=o.nextElement++,l="[",f="[",s="",v=n.children,m=v.indexOf(t);m<v.length;m++){var d=v[m];if("If"!==d.type&&"ElseIf"!==d.type&&"Else"!==d.type)break;l+=s+("Else"===d.type?"true":ne(d.attributes[0])),f+=s+"function(locals){"+ae({element:o.nextElement,nextElement:o.nextElement+1,type:"Root",attributes:[],children:d.children},a)+"}({})",s=","}return[te(a,"m.cc();")+re(a,n.element,c)+te(u,f+"];"),te(i,l+"];")+te(r,function(e,t,n,o){return"m.di(".concat(ee(e),",").concat(ee(t),",").concat(ee(n),",").concat(ee(o),");")}(r,i,u,n.element)),ee(r)+"[2]();"];case"ElseIf":case"Else":return["","",""];case"For":for(var p=ne(t.attributes[0]),h="[",y="",b=o.nextElement++,g=o.nextElement++,x=o.nextElement++,E=o.nextElement++,_="",w="",O=0;O<p.length;O++){var k=p[O];","===k||" "===k&&"i"===p[O+1]&&"n"===p[O+2]&&" "===p[O+3]&&(O+=3)?(h+=w+'"'+_.substring(7)+'"',_="",w=","):_+=k}return h+="]",y+=_,[te(b,"m.cc();")+re(b,n.element,c)+te(g,"function(locals){"+ae({element:o.nextElement,nextElement:o.nextElement+1,type:"Root",attributes:[],children:t.children},b)+"};")+te(x,"[];")+te(E,"[];"),ce(h,E,y,g,x,n.element),ce(h,E,"[]",g,x,n.element)];case"Text":var C=t.attributes[0],S=o.nextElement++,I=function(e,t){return"m.stc(".concat(ee(e),",").concat(t,");")}(S,ne(C)),$=te(S,function(e){return"m.ctn(".concat(e,");")}('""')),A="";return C.dynamic?A+=I:$+=I,[$+re(S,n.element,c),A,oe(S,n.element)];default:var T=t.attributes,q=t.children;if(function(e){return e[0]===e[0].toUpperCase()&&e[0]!==e[0].toLowerCase()}(t.type)){t.component=o.nextElement++;for(var j=te(t.component,"new m.c.".concat(t.type,"();")),U="",D=!1,F=0;F<T.length;F++){var L=T[F];if("@"===L.key[0])j+="".concat(ee(t.component),'.on("').concat(L.key.substring(1),'",function($event){locals.$event=$event;').concat(ne(L),";});");else{var R="".concat(ee(t.component),".").concat(L.key,"=").concat(ne(L),";");L.dynamic?(D=!0,U+=R):j+=R}}return j+="".concat(ee(t.component),".create(").concat(ee(n.element),");"),D?U+="".concat(ee(t.component),".update();"):j+="".concat(ee(t.component),".update();"),[j,U,"".concat(ee(t.component),".destroy();")]}t.element=o.nextElement++;for(var B=te(t.element,function(e){return'm.ce("'.concat(e,'");')}(t.type)),M="",N=0;N<T.length;N++){var z=T[N],G=void 0;if("@"===z.key[0]){var H=void 0,J=void 0;if("@bind"===z.key){var K=ne(z);G="".concat(ee(t.element),".value=").concat(K,";"),H="input",J="".concat(K,"=$event.target.value;instance.update();")}else G="",H=z.key.substring(1),J="locals.$event=$event;".concat(ne(z),";");B+=(X=t.element,Y=H,Z="function($event){".concat(J,"}"),"m.ael(".concat(ee(X),',"').concat(Y,'",').concat(Z,");"))}else V=t.element,W=z,G="m.sa(".concat(ee(V),',"').concat(W.key,'",').concat(ne(W),");");z.dynamic?M+=G:B+=G}for(var P=0;P<q.length;P++){var Q=e(q[P],t,o,null);B+=Q[0],M+=Q[1]}return[B+re(t.element,n.element,c),M,oe(t.element,n.element)]}var V,W,X,Y,Z},ae=function(e,t){for(var n=e.children,o="",c="",r="",a=0;a<n.length;a++){var i=f(n[a],e,e,t);o+=i[0],c+=i[1],r+=i[2]}for(var u="var ".concat(ee(e.element)),l=e.element+1;l<e.nextElement;l++)u+=","+ee(l);return"".concat(u,";return [function(_0){").concat(te(e.element,"_0;")).concat(o,"},function(){").concat(c,"},function(){").concat(r,"}];")},_=/<([\w\d-_]+)([^>]*?)(\/?)>/g,w=/\s*([\w\d-_]*)(?:=(?:("[\w\d-_]*"|'[\w\d-_]*')|{([\w\d-_]*)}))?/g;function l(e){var t=function(e){e=e.trim();for(var t=[],n=0;n<e.length;){var o=e[n];if("<"===o){var c=e[n+1];if("/"===c){var r=e.indexOf(">",n+2),a=e.slice(n+2,r);t.push({type:"tagClose",value:a}),n=r+1;continue}if("!"===c&&"-"===e[n+2]&&"-"===e[n+3]){n=e.indexOf("--\x3e",n+4)+3;continue}_.lastIndex=n;for(var i=_.exec(e),u=i[0],l=i[1],f=i[2],s=i[3],v={},m=void 0;null!==(m=w.exec(f));){var d=m[0],p=m[1],h=m[2],y=m[3];0===d.length?w.lastIndex+=1:v[p]=void 0===y?h:y}t.push({type:"tagOpen",value:l,attributes:v,closed:"/"===s}),n+=u.length}else if("{"===o){var b="";for(n+=1;n<e.length;n++){var g=e[n];if("}"===g)break;b+=g}t.push({type:"tagOpen",value:"Text",attributes:{"":b},closed:!0}),n+=1}else{for(var x="";n<e.length;n++){var E=e[n];if("<"===E)break;x+=E}t.push({type:"tagOpen",value:"Text",attributes:{"":'"'.concat(x,'"')},closed:!0})}}return t}(e);return u(0,t.length,t)}var n={},s={c:n,ce:function(e){return document.createElement(e)},ctn:function(e){return document.createTextNode(e)},cc:function(){return document.createComment("")},sa:function(e,t,n){e.setAttribute(t,n)},ael:function(e,t,n){e.addEventListener(t,n)},stc:function(e,t){e.textContent=t},ac:function(e,t){t.appendChild(e)},rc:function(e,t){t.removeChild(e)},ib:function(e,t,n){n.insertBefore(e,t)},di:function(e,t,n,o){for(var c=0;c<t.length;c++)if(t[c]){var r=n[c];return e===r?r[1]():(e&&e[2](),r[0](o),r[1](),e=r),e}},df:function(e,t,n,o,c,r){for(var a=c.length,i=n.length,u=i<a?a:i,l=e[1],f=e[0],s=0;s<u;s++)if(a<=s){var v={};v[l]=s,v[f]=n[s];var m=o(t[s]=v);c.push(m),m[0](r),m[1]()}else if(i<=s)c.pop()[2]();else{var d=t[s];d[l]=s,d[f]=n[s],c[s][1]()}}},v=function(e){this._view[0](e),this.emit("create")},m=function(e,t){if(void 0!==e)if("object"===c(e))for(var n in e)this[n]=e[n];else this[e]=t;if(!1===this._queued){this._queued=!0;var o=this;setTimeout(function(){o._view[1](),o._queued=!1,o.emit("update")},0)}},d=function(){this._view[2](),this.emit("destroy")},p=function(e,t){var n=this._events,o=n[e];void 0===o?n[e]=[t.bind(this)]:o.push(t.bind(this))},h=function(e,t){if(void 0===e)this._events={};else if(void 0===t)this._events[e]=[];else{var n=this._events[e];n.splice(n.indexOf(t),1)}},y=function(e,t){var n=this._events[e];if(void 0!==n)for(var o=0;o<n.length;o++)n[o](t)},o=function(e,t){var n=t.view;"string"==typeof n&&(n=new Function("m","instance","locals",l(n))),delete t.view;var o=t.onCreate,c=t.onUpdate,r=t.onDestroy;function a(){this._view=n(s,this,{}),this._events={},void 0!==o&&this.on("create",o),void 0!==c&&this.on("update",c),void 0!==r&&this.on("destroy",r)}return delete t.onCreate,delete t.onUpdate,delete t.onDestroy,(a.prototype=t)._name=e,t._queued=!1,t.create=v,t.update=m,t.destroy=d,t.on=p,t.off=h,t.emit=y,a},e={silent:!0};function t(e){var t=e.root;delete e.root,"string"==typeof t&&(t=document.querySelector(t));var n=new(o("",e));return n.create(t),n.update(),n}return t.extend=function(e,t){n[e]=o(e,t)},t.parse=u,t.generate=ae,t.compile=l,t.config=e,t});