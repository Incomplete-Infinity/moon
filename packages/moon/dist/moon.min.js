/**
 * Moon v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,r){"undefined"==typeof module?e.Moon=r():module.exports=r()}(this,(function(){"use strict";var e,r,a={driver:{input:function(){return e},output:function(r){e=r}}};function t(e){var a={};for(var t in r)a[t]=r[t].input();var n=e(a);for(var o in n)r[o].output(n[o])}function n(e,r){this.name=e,this.data=r}var o={};var i,s,l=null;function d(){}function u(e){var r=e.name;if("text"===r)return document.createTextNode(e.data.data);var a=document.createElement(r),t=e.data;for(var n in t){var o=t[n];if(64===n.charCodeAt(0)){var i=a.MoonEvent;null===i&&(i=a.MoonEvent=new d),i[n]=o,a.addEventListener(n.slice(1),i)}else switch(n){case"ariaset":for(var s in o)a.setAttribute("aria-"+s,o[s]);break;case"dataset":var l=a.dataset;for(var c in o)l[c]=o[c];break;case"style":var f=a.style;for(var v in o)f[v]=o[v];break;case"focus":o&&a.focus();break;case"class":a.className=o;break;case"for":a.htmlFor=o;break;case"children":for(var p=a.MoonChildren=[],m=0;m<o.length;m++){var h=u(o[m]);p.push(h),a.appendChild(h)}break;default:a[n]=o}}return a}d.prototype.handleEvent=function(e){t(this["@"+(l=e).type])},Node.prototype.MoonChildren=null,Node.prototype.MoonEvent=null;for(var c=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],f={node:function(e){return function(r){return new n(e,r)}}},v=function(e){var r=c[e];f[r]=function(e){return new n(r,e)}},p=0;p<c.length;p++)v(p);var m={input:function(){return Date.now()},output:function(e){var r=function(r){setTimeout((function(){t(e[r])}),r)};for(var a in e)r(a)}},h=null,b=/^([^:]+):\s*([^]*?)\s*$/gm;return{data:a,http:{driver:{input:function(){return h},output:function(e){for(var r=function(r){var a=e[r],n=new XMLHttpRequest;if(n.responseType="responseType"in a?a.responseType:"text",n.onload=function(){for(var e,r={},o=n.getAllResponseHeaders();null!==(e=b.exec(o));)r[e[1]]=e[2];h={status:n.status,headers:r,body:n.response},"onLoad"in a&&t(a.onLoad)},n.onerror=function(){h=null,"onError"in a&&t(a.onError)},n.open("method"in a?a.method:"GET",a.url),"headers"in a){var o=a.headers;for(var i in o)n.setRequestHeader(i,o[i])}n.send("body"in a?a.body:null)},a=0;a<e.length;a++)r(a)}}},run:t,time:{driver:m},use:function(e){r=e},view:{driver:function(e){for(var r=(s="string"==typeof e?document.querySelector(e):e).attributes,a={},t=0;t<r.length;t++){var c=r[t];a[c.name]=c.value}return i=new n(s.tagName.toLowerCase(),a),{input:function(){return l},output:function(e){if(i.name===e.name)!function e(r,a,t){var n=r.data,i=t.data;for(var s in i){var l=n[s],c=i[s];if(l!==c)if(64===s.charCodeAt(0)){var f=a.MoonEvent;null===f&&(f=a.MoonEvent=new d),s in f?f[s]=c:(f[s]=c,a.addEventListener(s.slice(1),f))}else switch(s){case"ariaset":if(void 0===l)for(var v in c)a.setAttribute("aria-"+v,c[v]);else{for(var p in c){var m=c[p];l[p]!==m&&a.setAttribute("aria-"+p,m)}for(var h in l)h in c||a.removeAttribute("aria-"+h)}break;case"dataset":var b=a.dataset;if(void 0===l)for(var k in c)b[k]=c[k];else{for(var g in c){var y=c[g];l[g]!==y&&(b[g]=y)}for(var C in l)C in c||delete b[C]}break;case"style":var E=a.style;if(void 0===l)for(var M in c)E[M]=c[M];else{for(var w in c){var x=c[w];l[w]!==x&&(E[w]=x)}for(var A in l)A in c||(E[A]="")}break;case"focus":c?a.focus():a.blur();break;case"class":a.className=c;break;case"for":a.htmlFor=c;break;case"children":var N=c.length;if(void 0===l)for(var L=a.MoonChildren=[],q=0;q<N;q++){var T=u(c[q]);L.push(T),a.appendChild(T)}else{var F=l.length;if(F===N)for(var H=a.MoonChildren,R=0;R<F;R++){var j=l[R],D=c[R];if(j!==D)if(j.name===D.name)e(j,H[R],D);else{var G=u(D);a.replaceChild(G,H[R]),H[R]=G}}else if(F>N){for(var S=a.MoonChildren,X=0;X<N;X++){var $=l[X],z=c[X];if($!==z)if($.name===z.name)e($,S[X],z);else{var B=u(z);a.replaceChild(B,S[X]),S[X]=B}}for(var I=N;I<F;I++)a.removeChild(S.pop())}else{for(var J=a.MoonChildren,K=0;K<F;K++){var O=l[K],P=c[K];if(O!==P)if(O.name===P.name)e(O,J[K],P);else{var Q=u(P);a.replaceChild(Q,J[K]),J[K]=Q}}for(var U=F;U<N;U++){var V=u(c[U]);J.push(V),a.appendChild(V)}}}break;default:a[s]=c}}var W,Y,Z=r.name;for(var _ in n)if(!(_ in i))if(64===_.charCodeAt(0)){var ee=a.MoonEvent;delete ee[_],a.removeEventListener(_.slice(1),ee)}else switch(_){case"ariaset":var re=n.ariaset;for(var ae in re)a.removeAttribute("aria-"+ae);break;case"dataset":var te=n.dataset,ne=a.dataset;for(var oe in te)delete ne[oe];break;case"focus":a.blur();break;case"class":a.className="";break;case"for":a.htmlFor="";break;case"children":for(var ie=n.children.length,se=a.MoonChildren,le=0;le<ie;le++)a.removeChild(se.pop());break;default:W=Z,a[Y=_]=W in o?o[W][Y]:(o[W]=document.createElement(W))[Y]}}(i,s,e);else{var r=u(e);s.parentNode.replaceChild(r,s),s=r}i=e}}},m:f}}}));