/**
 * Moon v1.0.0-beta.2
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,function(){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={element:0,text:1,component:2};var o,s,i,S=/<([\w\d-_]+)([^>]*?)(\/?)>/g,k=/\s*([\w\d-_:@]*)(?:=(?:("[^"]*"|'[^']*')|{([^{}]*)}))?/g;function t(e){e=e.trim();for(var t=[],n=0;n<e.length;){var r=e[n];if("<"===r){var o=e[n+1];if("/"===o){var a=e.indexOf(">",n+2),i=e.slice(n+2,a);0,t.push({type:"tagClose",value:i}),n=a+1;continue}if("!"===o&&"-"===e[n+2]&&"-"===e[n+3]){var u=e.indexOf("--\x3e",n+4);0,n=u+3;continue}S.lastIndex=n;var f=S.exec(e);0;for(var l=f[0],c=f[1],s=f[2],v=f[3],p={},d=void 0;null!==(d=k.exec(s));){var h=d[0],m=d[1],y=d[2],g=d[3];0===h.length?k.lastIndex+=1:p[m]=void 0===g?y:g}t.push({type:"tagOpen",value:c,attributes:p,closed:"/"===v}),n+=l.length}else if("{"===r){var b="";for(n+=1;n<e.length;n++){var x=e[n];if("}"===x)break;b+=x}t.push({type:"tagOpen",value:"text",attributes:{"":b},closed:!0}),n+=1}else{for(var w="";n<e.length;n++){var O=e[n];if("<"===O||"{"===O)break;w+=O}t.push({type:"tagOpen",value:"text",attributes:{"":'"'+w+'"'},closed:!0})}}return t}function v(e,t,n,r){this.message=e,this.start=t,this.end=n,this.next=r}function p(e,t,n){var r=n[e],o=n[t-1],a=t-e;if(0==a)return new v("",e,t);if(1==a)return"tagOpen"===r.type&&!0===r.closed?{type:r.value,attributes:r.attributes,children:[]}:new v("",e,t);if("tagOpen"!==r.type||"tagClose"!==o.type||r.value!==o.value)return new v("",e,t);var i=function e(t,n,r){var o;if(0==n-t)return[];for(var a=t+1;a<=n;a++){var i=p(t,a,r);if(i instanceof v)o=i;else{var u=e(a,n,r);if(!(u instanceof v)){for(var f=[i],l=0;l<u.length;l++)f.push(u[l]);return f}}}return new v("",t,n,o)}(e+1,t-1,n);return i instanceof v?new v("",e,t,i):{type:r.value,attributes:r.attributes,children:i}}function n(e){var t=p(0,e.length,e);return t}function u(e){var t,n=e.type;t="text"===n?c.text:n[0]===n[0].toLowerCase()?c.element:c.component;var r="{";for(var o in e.attributes)r+='"'+o+'":'+e.attributes[o]+",";r+="children:[";for(var a="",i=0;i<e.children.length;i++)r+=a+u(e.children[i]),a=",";return"{type:"+t+',name:"'+n+'",data:'+r+"]},node:null}"}function f(e){return u(n(t(e)))}var d,h={};function m(e){s=e}function l(){d=performance.now(),function e(t,n,r){for(;;){var o=t.pop(),a=n.pop(),i=r.pop();if(o.type===c.component){var u=h[o.name](o.data);null===a?m(u):o=a.data.children[i]=u}else null===a&&m(o);for(var f=o.data.children,l=0;l<f.length;l++)t.push(f[l]),n.push(o),r.push(l);if(0===t.length)break;if(8<=performance.now()-d){requestAnimationFrame(function(){d=performance.now(),e(t,n,r)});break}}0===t.length&&console.log(s)}([i(o)],[null],[0])}function e(t){var e=function(e,t){return void 0===e?t:e}(t.name,"Root");delete t.name;var n=t.view;delete t.view,"string"==typeof n&&(n=new Function("data","return "+f(n)));var r="string"==typeof t.root?document.querySelector(t.root):t.root;delete t.root,void 0===r?h[e]=function(e){return n(function(e,t){var n={};for(var r in t)n[r]=t[r];for(var o in e)n[o]=e[o];return n}(e,t))}:(c.element,r.tagName,function(e){i=e}(n),function(e){o=e}(t),l())}return e.lex=t,e.parse=n,e.generate=u,e.compile=f,e.components=h,e.set=function(e){!function e(t,n){for(var r in n){var o=n[r];"object"===a(o)?e(t[r],o):t[r]=o}}(o,e),l()},e});