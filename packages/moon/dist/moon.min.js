/**
 * Moon v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(n,e){"undefined"==typeof module?n.Moon=e():module.exports=e()}(this,function(){"use strict";var e,o,n={driver:{input:function(){return e},output:function(n){e=n}}};function i(n){var e={};for(var t in o)e[t]=o[t].input();var r=n(e);for(var u in r)o[u].output(r[u])}function s(n,e,t){this.node=n,this.element=e,this.children=t}function c(n,e){this.name=n,this.data=e}var H={};function R(n,e,t){if("ariaset"===e)for(var r in t)n.setAttribute("aria-"+r,t[r]);else{var u=n[e];for(var o in t)u[o]=t[o]}}function j(n,e,t,r){for(var u in t)if(!(u in r))switch(e){case"ariaset":n.removeAttribute("aria-"+u);break;case"dataset":delete n.dataset[u];break;default:n.style[u]=""}}var a=null;function D(){}function G(n){var e,t=n.name,r=[];if("text"===t)e=document.createTextNode(n.data.value);else{e=document.createElement(t);var u=n.data;for(var o in u){var i=u[o];if(64===o.charCodeAt(0)){var c=e.MoonEvent;null===c&&(c=e.MoonEvent=new D),c[o]=i,e.addEventListener(o.slice(1),c)}else switch(o){case"ariaset":case"dataset":case"style":R(e,o,i);break;case"focus":i&&e.focus();break;case"class":e.className=i;break;case"for":e.htmlFor=i;break;case"children":for(var a=0;a<i.length;a++){var f=G(i[a]);r.push(f),e.appendChild(f.element)}break;default:e[o]=i}}}return new s(n,e,r)}D.prototype.handleEvent=function(n){i(this["@"+(a=n).type])};var t={input:function(){return Date.now()},output:function(e){function n(n){setTimeout(function(){i(e[n])},n)}for(var t in e)n(t)}},f=Node.prototype.MoonEvent=null,w=/^([^:]+):\s*([^]*?)\s*$/gm;return{data:n,http:{driver:{input:function(){return f},output:function(o){for(var n=function(n){var r=o[n],u=new XMLHttpRequest;if(u.responseType="responseType"in r?r.responseType:"text",u.onload=function(){for(var n,e={},t=u.getAllResponseHeaders();null!==(n=w.exec(t));)e[n[1]]=n[2];f={status:u.status,headers:e,body:u.response},"onLoad"in r&&i(r.onLoad)},u.onerror=function(){f=null,"onError"in r&&i(r.onError)},u.open("method"in r?r.method:"GET",r.url),"headers"in r){var e=r.headers;for(var t in e)u.setRequestHeader(t,e[t])}u.send("body"in r?r.body:null)},e=0;e<o.length;e++)n(e)}}},run:i,time:{driver:t},use:function(n){o=n},view:{driver:function(n){"string"==typeof n&&(n=document.querySelector(n));for(var e=n.attributes,t={},r=0;r<e.length;r++){var u=e[r];t[u.name]=u.value}var o=new s(new c(n.tagName.toLowerCase(),t,[]),n,[]);return{input:function(){return a},output:function(n){!function n(e,t){var r,u,o=e.node;if(o!==t){var i=o.name;if(i!==(e.node=t).name){var c=e.element,a=G(t),f=a.element;e.element=f,e.children=a.children,c.parentNode.replaceChild(f,c)}else if("text"===i){var s=t.data.value;o.data.value!==s&&(e.element.data=s)}else{var w=o.data,l=t.data;if(w!==l){var d=e.element;for(var m in l){var p=w[m],v=l[m];if(p!==v)if(64===m.charCodeAt(0)){var b=d.MoonEvent;null===b&&(b=d.MoonEvent=new D),m in b?b[m]=v:(b[m]=v,d.addEventListener(m.slice(1),b))}else switch(m){case"ariaset":case"dataset":case"style":R(d,m,v),void 0!==p&&j(d,m,p,v);break;case"focus":v?d.focus():d.blur();break;case"class":d.className=v;break;case"for":d.htmlFor=v;break;case"children":var h=e.children,g=h.length,k=v.length;if(g===k)for(var y=0;y<g;y++)n(h[y],v[y]);else if(k<g){for(var x=0;x<k;x++)n(h[x],v[x]);for(var E=k;E<g;E++)d.removeChild(h.pop().element)}else{for(var q=0;q<g;q++)n(h[q],v[q]);for(var C=g;C<k;C++){var M=G(v[C]);h.push(M),d.appendChild(M.element)}}break;default:d[m]=v}}for(var L in w)if(!(L in l))if(64===L.charCodeAt(0)){var N=d.MoonEvent;delete N[L],d.removeEventListener(L.slice(1),N)}else switch(L){case"ariaset":case"dataset":case"style":j(d,L,w[L],{});break;case"focus":w.focus&&d.blur();break;case"class":d.className="";break;case"for":d.htmlFor="";break;case"children":for(var A=e.children,T=A.length,F=0;F<T;F++)d.removeChild(A.pop().element);break;default:r=i,d[u=L]=r in H?H[r][u]:(H[r]=document.createElement(r))[u]}}}}}(o,n)}}},m:{node:function(e){return function(n){return new c(e,n)}},a:function(n){return new c("a",n)},abbr:function(n){return new c("abbr",n)},acronym:function(n){return new c("acronym",n)},address:function(n){return new c("address",n)},applet:function(n){return new c("applet",n)},area:function(n){return new c("area",n)},article:function(n){return new c("article",n)},aside:function(n){return new c("aside",n)},audio:function(n){return new c("audio",n)},b:function(n){return new c("b",n)},base:function(n){return new c("base",n)},basefont:function(n){return new c("basefont",n)},bdi:function(n){return new c("bdi",n)},bdo:function(n){return new c("bdo",n)},bgsound:function(n){return new c("bgsound",n)},big:function(n){return new c("big",n)},blink:function(n){return new c("blink",n)},blockquote:function(n){return new c("blockquote",n)},body:function(n){return new c("body",n)},br:function(n){return new c("br",n)},button:function(n){return new c("button",n)},canvas:function(n){return new c("canvas",n)},caption:function(n){return new c("caption",n)},center:function(n){return new c("center",n)},cite:function(n){return new c("cite",n)},code:function(n){return new c("code",n)},col:function(n){return new c("col",n)},colgroup:function(n){return new c("colgroup",n)},command:function(n){return new c("command",n)},content:function(n){return new c("content",n)},data:function(n){return new c("data",n)},datalist:function(n){return new c("datalist",n)},dd:function(n){return new c("dd",n)},del:function(n){return new c("del",n)},details:function(n){return new c("details",n)},dfn:function(n){return new c("dfn",n)},dialog:function(n){return new c("dialog",n)},dir:function(n){return new c("dir",n)},div:function(n){return new c("div",n)},dl:function(n){return new c("dl",n)},dt:function(n){return new c("dt",n)},element:function(n){return new c("element",n)},em:function(n){return new c("em",n)},embed:function(n){return new c("embed",n)},fieldset:function(n){return new c("fieldset",n)},figcaption:function(n){return new c("figcaption",n)},figure:function(n){return new c("figure",n)},font:function(n){return new c("font",n)},footer:function(n){return new c("footer",n)},form:function(n){return new c("form",n)},frame:function(n){return new c("frame",n)},frameset:function(n){return new c("frameset",n)},h1:function(n){return new c("h1",n)},h2:function(n){return new c("h2",n)},h3:function(n){return new c("h3",n)},h4:function(n){return new c("h4",n)},h5:function(n){return new c("h5",n)},h6:function(n){return new c("h6",n)},head:function(n){return new c("head",n)},header:function(n){return new c("header",n)},hgroup:function(n){return new c("hgroup",n)},hr:function(n){return new c("hr",n)},html:function(n){return new c("html",n)},i:function(n){return new c("i",n)},iframe:function(n){return new c("iframe",n)},image:function(n){return new c("image",n)},img:function(n){return new c("img",n)},input:function(n){return new c("input",n)},ins:function(n){return new c("ins",n)},isindex:function(n){return new c("isindex",n)},kbd:function(n){return new c("kbd",n)},keygen:function(n){return new c("keygen",n)},label:function(n){return new c("label",n)},legend:function(n){return new c("legend",n)},li:function(n){return new c("li",n)},link:function(n){return new c("link",n)},listing:function(n){return new c("listing",n)},main:function(n){return new c("main",n)},map:function(n){return new c("map",n)},mark:function(n){return new c("mark",n)},marquee:function(n){return new c("marquee",n)},math:function(n){return new c("math",n)},menu:function(n){return new c("menu",n)},menuitem:function(n){return new c("menuitem",n)},meta:function(n){return new c("meta",n)},meter:function(n){return new c("meter",n)},multicol:function(n){return new c("multicol",n)},nav:function(n){return new c("nav",n)},nextid:function(n){return new c("nextid",n)},nobr:function(n){return new c("nobr",n)},noembed:function(n){return new c("noembed",n)},noframes:function(n){return new c("noframes",n)},noscript:function(n){return new c("noscript",n)},object:function(n){return new c("object",n)},ol:function(n){return new c("ol",n)},optgroup:function(n){return new c("optgroup",n)},option:function(n){return new c("option",n)},output:function(n){return new c("output",n)},p:function(n){return new c("p",n)},param:function(n){return new c("param",n)},picture:function(n){return new c("picture",n)},plaintext:function(n){return new c("plaintext",n)},pre:function(n){return new c("pre",n)},progress:function(n){return new c("progress",n)},q:function(n){return new c("q",n)},rb:function(n){return new c("rb",n)},rbc:function(n){return new c("rbc",n)},rp:function(n){return new c("rp",n)},rt:function(n){return new c("rt",n)},rtc:function(n){return new c("rtc",n)},ruby:function(n){return new c("ruby",n)},s:function(n){return new c("s",n)},samp:function(n){return new c("samp",n)},script:function(n){return new c("script",n)},section:function(n){return new c("section",n)},select:function(n){return new c("select",n)},shadow:function(n){return new c("shadow",n)},slot:function(n){return new c("slot",n)},small:function(n){return new c("small",n)},source:function(n){return new c("source",n)},spacer:function(n){return new c("spacer",n)},span:function(n){return new c("span",n)},strike:function(n){return new c("strike",n)},strong:function(n){return new c("strong",n)},style:function(n){return new c("style",n)},sub:function(n){return new c("sub",n)},summary:function(n){return new c("summary",n)},sup:function(n){return new c("sup",n)},svg:function(n){return new c("svg",n)},table:function(n){return new c("table",n)},tbody:function(n){return new c("tbody",n)},td:function(n){return new c("td",n)},template:function(n){return new c("template",n)},text:function(n){return new c("text",n)},textarea:function(n){return new c("textarea",n)},tfoot:function(n){return new c("tfoot",n)},th:function(n){return new c("th",n)},thead:function(n){return new c("thead",n)},time:function(n){return new c("time",n)},title:function(n){return new c("title",n)},tr:function(n){return new c("tr",n)},track:function(n){return new c("track",n)},tt:function(n){return new c("tt",n)},u:function(n){return new c("u",n)},ul:function(n){return new c("ul",n)},var:function(n){return new c("var",n)},video:function(n){return new c("video",n)},wbr:function(n){return new c("wbr",n)},xmp:function(n){return new c("xmp",n)}}}}});