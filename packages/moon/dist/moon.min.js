/**
 * Moon v1.0.0-beta.3
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,function(){"use strict";var i,e={driver:function(t){return{input:function(){return t},output:function(e){t=e}}}},j={element:0,text:1};function t(e){var t={};for(var n in i)t[n]=i[n].input();var r=e(t);for(var a in r)i[a].output(r[a])}function u(e,t,n){this.node=e,this.element=t,this.children=n}function o(e,t,n,r){this.type=e,this.name=t,this.data=n,this.children=r}var l,z={};function B(e,t,n){if("ariaset"===t)for(var r in n)e.setAttribute("aria-"+r,n[r]);else{var a=e[t];for(var i in n)a[i]=n[i]}}function D(e,t,n,r){for(var a in n)if(!(a in r))switch(t){case"ariaset":e.removeAttribute("aria-"+a);break;case"dataset":delete e.dataset[a];break;default:e.style[a]=""}}function F(){}function G(e){var t,n=[];if(e.type===j.text)t=document.createTextNode(e.data[""]);else{t=document.createElement(e.name);for(var r=e.children,a=0;a<r.length;a++){var i=G(r[a]);n.push(i),t.appendChild(i.element)}var o=e.data;for(var l in o){var v=o[l];if(64===l.charCodeAt(0)){var d=t.MoonEvent;null===d&&(d=t.MoonEvent=new F),d[l]=v,t.addEventListener(l.slice(1),d)}else"ariaset"===l||"dataset"===l||"style"===l?B(t,l,v):t[l]=v}}return new u(e,t,n)}return F.prototype.handleEvent=function(e){t(this["@"+(l=e).type])},Node.prototype.MoonEvent=null,{data:e,run:t,use:function(e){i=e},view:{driver:function(e){"string"==typeof e&&(e=document.querySelector(e));for(var t=e.attributes,n={},r=0;r<t.length;r++){var a=t[r];n[a.name]=a.value}var i=new u(new o(j.element,e.tagName.toLowerCase(),n,[]),e,[]);return{input:function(){return l},output:function(e){!function e(t,n){var r,a,i=t.node;if(i!==n){var o=i.type,l=i.name;if(o!==(t.node=n).type||l!==n.name){var v=t.element,d=G(n),u=d.element;t.element=u,t.children=d.children,v.parentNode.replaceChild(u,v)}else if(o===j.text){var f=n.data[""];i.data[""]!==f&&(t.element.data=f)}else{var s=i.data,c=n.data;if(s!==c){var h=t.element;for(var m in c){var p=s[m],y=c[m];if(p!==y)if(64===m.charCodeAt(0)){var E=h.MoonEvent;null===E&&(E=h.MoonEvent=new F),m in E?E[m]=y:(E[m]=y,h.addEventListener(m.slice(1),E))}else"ariaset"===m||"dataset"===m||"style"===m?(B(h,m,y),void 0!==p&&D(h,m,p,y)):h[m]=y}for(var w in s)if(!(w in c))if(64===w.charCodeAt(0)){var C=h.MoonEvent;delete C[w],h.removeEventListener(w.slice(1),C)}else"ariaset"===w||"dataset"===w||"style"===w?D(h,w,s[w],{}):(r=l,h[a=w]=r in z?z[r][a]:(z[r]=document.createElement(r))[a])}var M=n.children;if(i.children!==M){var g=t.children,b=g.length,x=M.length;if(b===x)for(var A=0;A<b;A++)e(g[A],M[A]);else{var L=t.element;if(x<b){for(var N=0;N<x;N++)e(g[N],M[N]);for(var k=x;k<b;k++)L.removeChild(g.pop().element)}else{for(var q=0;q<b;q++)e(g[q],M[q]);for(var S=b;S<x;S++){var T=G(M[S]);g.push(T),L.appendChild(T.element)}}}}}}}(i,e)}}},m:function(e,t,n,r){return new o(e,t,n,r)}}}});