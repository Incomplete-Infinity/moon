/**
 * Moon v1.0.0-beta.2
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,function(){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c={element:0,text:1,component:2};var E=/<([\w\d-_]+)([^>]*?)(\/?)>/g,S=/\s*([\w\d-_:@]*)(?:=(?:("[^"]*"|'[^']*')|{([^{}]*)}))?/g;function t(e){e=e.trim();for(var t=[],n=0;n<e.length;){var r=e[n];if("<"===r){var o=e[n+1];if("/"===o){var a=e.indexOf(">",n+2),u=e.slice(n+2,a);0,t.push({type:"tagClose",value:u}),n=a+1;continue}if("!"===o&&"-"===e[n+2]&&"-"===e[n+3]){var i=e.indexOf("--\x3e",n+4);0,n=i+3;continue}E.lastIndex=n;var l=E.exec(e);0;for(var f=l[0],c=l[1],p=l[2],s=l[3],v={},d=void 0;null!==(d=S.exec(p));){var m=d[0],y=d[1],h=d[2],g=d[3];0===m.length?S.lastIndex+=1:v[y]=void 0===g?h:g}t.push({type:"tagOpen",value:c,attributes:v,closed:"/"===s}),n+=f.length}else if("{"===r){var b="";for(n+=1;n<e.length;n++){var x=e[n];if("}"===x)break;b+=x}t.push({type:"tagOpen",value:"text",attributes:{"":b},closed:!0}),n+=1}else{for(var w="";n<e.length;n++){var C=e[n];if("<"===C||"{"===C)break;w+=C}t.push({type:"tagOpen",value:"text",attributes:{"":'"'+w+'"'},closed:!0})}}return t}function p(e,t,n,r){this.message=e,this.start=t,this.end=n,this.next=r}function s(e,t,n){var r=n[e],o=n[t-1],a=t-e;if(0==a)return new p("",e,t);if(1==a)return"tagOpen"===r.type&&!0===r.closed?{type:r.value,attributes:r.attributes,children:[]}:new p("",e,t);if("tagOpen"!==r.type||"tagClose"!==o.type||r.value!==o.value)return new p("",e,t);var u=function e(t,n,r){var o;if(0==n-t)return[];for(var a=t+1;a<=n;a++){var u=s(t,a,r);if(u instanceof p)o=u;else{var i=e(a,n,r);if(!(i instanceof p)){for(var l=[u],f=0;f<i.length;f++)l.push(i[f]);return l}}}return new p("",t,n,o)}(e+1,t-1,n);return u instanceof p?new p("",e,t,u):{type:r.value,attributes:r.attributes,children:u}}function n(e){var t=s(0,e.length,e);return t}var o,v,u,d={createElement:48,updateElement:33,createText:34,updateText:35,destroyElement:20,appendElement:37,createComponent:54,updateComponent:39,destroyComponent:24,return:9,returnVar:26};function m(e,t){for(var n=String.fromCharCode(e),r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n}function y(e){var t=e.type;return"text"===t?function(e,t,n){var r=n++,o=e.attributes[""],a=t[o];return void 0===a&&(a=t[o]=n++),{create:m(d.createText,[r,a]),createVar:r,update:m(d.updateText,[a]),destroy:m(d.destroyElement,[r]),total:n}}(e,data,total):t[0]===t[0].toLowerCase()?function(e,t,n){var r='"'+e.type+'"',o=function(e){var t="{";for(var n in e)t+='"'+n+'":'+e[n]+",";return t+"}"}(e.attributes),a=n++,u=t[r],i=t[o];void 0===u&&(u=t[r]=n++),void 0===i&&(i=t[o]=n++);for(var l="",f="",c="",p=0;p<e.children.length;p++){var s=y(e.children[p]);l+=s.create,l+=m(d.appendElement,[s.createVar,a]),f+=s.update,c+=s.destroy,n=s.total}return{create:m(d.createElement,[a,u,i])+l,createVar:a,update:m(d.updateElement,[a])+f,destroy:m(d.destroyElement,[a])+c,total:n}}(e,data,total):void 0}function i(e){return y(n(t(e)))}var h,g={};function b(e){v=e}function l(){h=performance.now(),function e(t,n,r){for(;;){var o=t.pop(),a=n.pop(),u=r.pop();if(o.type===c.component){var i=g[o.name](o.data);null===a?b(i):o=a.data.children[u]=i}else null===a&&b(o);for(var l=o.data.children,f=0;f<l.length;f++)t.push(l[f]),n.push(o),r.push(f);if(0===t.length)break;if(8<=performance.now()-h){requestAnimationFrame(function(){h=performance.now(),e(t,n,r)});break}}0===t.length&&console.log(v)}([u(o)],[null],[0])}function e(t){var e=function(e,t){return void 0===e?t:e}(t.name,"Root");delete t.name;var n=t.view;delete t.view,"string"==typeof n&&(n=i(n));var r="string"==typeof t.root?document.querySelector(t.root):t.root;delete t.root,void 0===r?g[e]=function(e){return n(function(e,t){var n={};for(var r in t)n[r]=t[r];for(var o in e)n[o]=e[o];return n}(e,t))}:(c.element,r.tagName,function(e){u=e}(n),function(e){o=e}(t),l())}return e.lex=t,e.parse=n,e.generate=y,e.compile=i,e.components=g,e.set=function(e){!function e(t,n){for(var r in n){var o=n[r];"object"===a(o)?e(t[r],o):t[r]=o}}(o,e),l()},e});