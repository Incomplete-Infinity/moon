/**
 * Moon v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,function(){"use strict";var t,o,e={driver:{input:function(){return t},output:function(e){t=e}}};function i(e){var t={};for(var n in o)t[n]=o[n].input();var r=e(t);for(var a in r)o[a].output(r[a])}function f(e,t,n){this.node=e,this.element=t,this.children=n}function s(e,t,n){this.name=e,this.data=t,this.children=n}var F={};function H(e,t,n){if("ariaset"===t)for(var r in n)e.setAttribute("aria-"+r,n[r]);else{var a=e[t];for(var o in n)a[o]=n[o]}}function R(e,t,n,r){for(var a in n)if(!(a in r))switch(t){case"ariaset":e.removeAttribute("aria-"+a);break;case"dataset":delete e.dataset[a];break;default:e.style[a]=""}}var u=null;function D(){}function G(e){var t,n=e.name,r=[];if("text"===n)t=document.createTextNode(e.data[""]);else{t=document.createElement(n);for(var a=e.children,o=0;o<a.length;o++){var i=G(a[o]);r.push(i),t.appendChild(i.element)}var s=e.data;for(var u in s){var c=s[u];if(64===u.charCodeAt(0)){var l=t.MoonEvent;null===l&&(l=t.MoonEvent=new D),l[u]=c,t.addEventListener(u.slice(1),l)}else switch(u){case"ariaset":case"dataset":case"style":H(t,u,c);break;case"focus":c&&t.focus();break;case"class":t.className=c;break;case"for":t.htmlFor=c;break;default:t[u]=c}}}return new f(e,t,r)}D.prototype.handleEvent=function(e){i(this["@"+(u=e).type])};var n={input:function(){return Date.now()},output:function(t){function e(e){setTimeout(function(){i(t[e])},e)}for(var n in t)e(n)}},c=Node.prototype.MoonEvent=null,l=/^([^:]+):\s*([^]*?)\s*$/gm;return{data:e,http:{driver:{input:function(){return c},output:function(o){for(var e=function(e){var r=o[e],a=new XMLHttpRequest;if(a.responseType="responseType"in r?r.responseType:"text",a.onload=function(){for(var e,t={},n=a.getAllResponseHeaders();null!==(e=l.exec(n));)t[e[1]]=e[2];c={status:a.status,headers:t,body:a.response},"onLoad"in r&&i(r.onLoad)},a.onerror=function(){c=null,"onError"in r&&i(r.onError)},a.open("method"in r?r.method:"GET",r.url),"headers"in r){var t=r.headers;for(var n in t)a.setRequestHeader(n,t[n])}a.send("body"in r?r.body:null)},t=0;t<o.length;t++)e(t)}}},run:i,time:{driver:n},use:function(e){o=e},view:{driver:function(e){"string"==typeof e&&(e=document.querySelector(e));for(var t=e.attributes,n={},r=0;r<t.length;r++){var a=t[r];n[a.name]=a.value}var o=new f(new s(e.tagName.toLowerCase(),n,[]),e,[]);return{input:function(){return u},output:function(e){!function e(t,n){var r,a,o=t.node;if(o!==n){var i=o.name;if(i!==(t.node=n).name){var s=t.element,u=G(n),c=u.element;t.element=c,t.children=u.children,s.parentNode.replaceChild(c,s)}else if("text"===i){var l=n.data[""];o.data[""]!==l&&(t.element.data=l)}else{var f=o.data,d=n.data;if(f!==d){var v=t.element;for(var h in d){var m=f[h],p=d[h];if(m!==p)if(64===h.charCodeAt(0)){var b=v.MoonEvent;null===b&&(b=v.MoonEvent=new D),h in b?b[h]=p:(b[h]=p,v.addEventListener(h.slice(1),b))}else switch(h){case"ariaset":case"dataset":case"style":H(v,h,p),void 0!==m&&R(v,h,m,p);break;case"focus":p?v.focus():v.blur();break;case"class":v.className=p;break;case"for":v.htmlFor=p;break;default:v[h]=p}}for(var y in f)if(!(y in d))if(64===y.charCodeAt(0)){var E=v.MoonEvent;delete E[y],v.removeEventListener(y.slice(1),E)}else switch(y){case"ariaset":case"dataset":case"style":R(v,y,f[y],{});break;case"focus":f.focus&&v.blur();break;case"class":v.className="";break;case"for":v.htmlFor="";break;default:r=i,v[a=y]=r in F?F[r][a]:(F[r]=document.createElement(r))[a]}}var k=n.children;if(o.children!==k){var w=t.children,g=w.length,C=k.length;if(g===C)for(var M=0;M<g;M++)e(w[M],k[M]);else{var L=t.element;if(C<g){for(var N=0;N<C;N++)e(w[N],k[N]);for(var x=C;x<g;x++)L.removeChild(w.pop().element)}else{for(var A=0;A<g;A++)e(w[A],k[A]);for(var T=g;T<C;T++){var q=G(k[T]);w.push(q),L.appendChild(q.element)}}}}}}}(o,e)}}},m:function(e,t,n){return new s(e,t,n)}}}});