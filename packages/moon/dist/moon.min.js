/**
 * Moon v1.0.0-beta.7
 * Copyright 2016-2020 Kabir Shah
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,(function(){"use strict";var e={};function t(t){e=t}var r=null,n={get:function(){return r},set:function(e){r=e}};Node.prototype.MoonName=null,Node.prototype.MoonData=null,Node.prototype.MoonChildren=null,Node.prototype.MoonReferenceEvents=null;var o=document.getElementById("moon-root");o.MoonName="div",o.MoonData={id:"moon-root"};var a={get:function(){return o},set:function(e){o=e}},i={get:function(){return Date.now()},set:function(){}},s={get:function(){return localStorage},set:function(e){for(var t in e){var r=e[t];t in localStorage&&r===localStorage[t]||(localStorage[t]=r)}for(var n in localStorage)n in e||delete localStorage[n]}},l=/^([^:]+):\s*([^]*?)\s*$/gm,u={},c={};function f(e,t,r){var n=new XMLHttpRequest;if(n.responseType="responseType"in t?t.responseType:"text",n.onload=function(){for(var t,o={},a=n.getAllResponseHeaders();null!==(t=l.exec(a));)o[t[1]]=t[2];r({status:n.status,headers:o,body:n.response}),e in u&&u[e]()},n.onerror=function(){r({status:0,headers:null,body:null}),e in c&&c[e]()},n.open("method"in t?t.method:"GET",t.url),"headers"in t){var o=t.headers;for(var a in o)n.setRequestHeader(a,o[a])}n.send("body"in t?t.body:null)}var v={};function d(e){return function(t){e.response=t}}var p,m={get:function(){return v},set:function(e){for(var t in v=e){var r=v[t];null===r.response.status&&f(t,r.request,d(r))}}},h={route:location.pathname},b={data:n,http:m,root:{get:function(){return h},set:function(e){h=e}},storage:s,time:i,view:a};function g(){for(var r in b)e[r]=b[r].get();for(var n in t(p(e)),b)b[n].set(e[n])}function k(r){return function(){for(var n in b)e[n]=b[n].get();for(var o in t(r(e)),t(p(e)),b)b[o].set(e[o])}}var y={input:{"*value":{key:"value",event:"input"}}},w=document.createTextNode("");w.MoonName="",w.MoonData={},w.MoonChildren=[];var M={};function C(e,t){return(e in M?M[e]:M[e]="text"===e?document.createTextNode(""):document.createElement(e))[t]}function E(){}function N(e,t,r){return k((function(n){return e(n,t[r])}))}E.prototype.handleEvent=function(e){this[e.type]()};for(var x=function(e){return function(t){return function(r){var n=r.view,o=n.MoonName,a=n.MoonData;if(e!==o){for(var i in n="text"===e?document.createTextNode(""):document.createElement(e),t){var s=t[i],l=i[0];if("*"===l){var u=y[e][i],c=u.key,f=u.event,v=n.MoonReferenceEvents;null===v&&(v=n.MoonReferenceEvents=new E),n[c]=s.get(r),v[f]=N(s.set,n,c),n.addEventListener(f,v)}else if("o"===l&&"n"===i[1])n[i.toLowerCase()]=k(s);else switch(i){case"attributes":for(var d in s)n.setAttribute(d,s[d]);break;case"style":var p=n.style;for(var m in s)p[m]=s[m];break;case"class":n.className=s;break;case"for":n.htmlFor=s;break;case"children":for(var h=n.MoonChildren=[],b=0;b<s.length;b++)r.view=w,r=s[b](r),h.push(n.appendChild(r.view));break;default:n[i]=s}}n.MoonName=e,n.MoonData=t}else if(t===a){if("children"in t)for(var g=t.children,M=n.MoonChildren,x=0;x<g;x++){var L=r.view=M[x],R=(r=g[x](r)).view;R!==L&&(n.replaceChild(R,L),M[x]=R)}}else{for(var T in n.MoonData=t,t){var q=t[T];if(T in a){var D=a[T];if("children"===T){var S=q.length,A=D.length,F=n.MoonChildren,H=0;if(S===A)for(;H<S;H++){var j=r.view=F[H],B=(r=q[H](r)).view;B!==j&&(n.replaceChild(B,j),F[H]=B)}else if(S<A){for(;H<S;H++){var G=r.view=F[H],I=(r=q[H](r)).view;I!==G&&(n.replaceChild(I,G),F[H]=I)}for(;H<A;H++)n.removeChild(F.pop())}else{for(;H<A;H++){var X=r.view=F[H],$=(r=q[H](r)).view;$!==X&&(n.replaceChild($,X),F[H]=$)}for(;H<S;H++)r.view=w,r=q[H](r),F.push(n.appendChild(r.view))}}else if(q!==D){var z=T[0];if("*"===z){var J=y[e][T],K=J.key;n[K]=q.get(r),q.value!==D.value&&(n.MoonReferenceEvents[J.event]=N(q.set,n,K))}else if("o"===z&&"n"===T[1])n[T.toLowerCase()]=k(q);else switch(T){case"attributes":for(var O in q){var P=q[O];O in D&&P===D[O]||n.setAttribute(O,P)}for(var Q in D)Q in q||n.removeAttribute(Q);break;case"style":var U=n.style;for(var V in q){var W=q[V];V in D&&W===D[V]||(U[V]=W)}for(var Y in D)Y in q||(U[Y]="");break;case"class":n.className=q;break;case"for":n.htmlFor=q;break;default:n[T]=q}}}else{var Z=T[0];if("*"===Z){var _=y[e][T],ee=_.key,te=_.event,re=n.MoonReferenceEvents;null===re&&(re=n.MoonReferenceEvents=new E),n[ee]=q.get(r),re[te]=N(q.set,n,ee),n.addEventListener(te,re)}else if("o"===Z&&"n"===T[1])n[T.toLowerCase()]=k(q);else switch(T){case"attributes":for(var ne in q)n.setAttribute(ne,q[ne]);break;case"style":var oe=n.style;for(var ae in q)oe[ae]=q[ae];break;case"class":n.className=q;break;case"for":n.htmlFor=q;break;case"children":for(var ie=n.MoonChildren=[],se=0;se<q.length;se++)r.view=w,r=q[se](r),ie.push(n.appendChild(r.view));break;default:n[T]=q}}}for(var le in a)if(!(le in t)){var ue=le[0];if("*"===ue){var ce=y[e][le],fe=ce.key,ve=ce.event,de=n.MoonReferenceEvents;n[fe]=C(e,fe),de[ve]=null,n.removeEventListener(ve,de)}else if("o"===ue&&"n"===le[1])n[le.toLowerCase()]=null;else switch(le){case"attributes":for(var pe in a.attributes)n.removeAttribute(pe);break;case"class":n.className="";break;case"for":n.htmlFor="";break;case"children":for(var me=n.MoonChildren,he=0;he<me.length;he++)n.removeChild(me.pop());break;default:n[le]=C(e,le)}}}return r.view=n,r}}},L=x("div"),R=function(e){return function(t){var r=t.root.route;return r!==location.pathname&&history.pushState(null,"",r),L(e)(t)}},T=function(e){return function(t){for(var r=t.root.route,n="/",o=1;o<r.length;o++){var a=r[o];"/"===a?(e=(n in e?e[n]:e["/*"])[1],n="/"):n+=a}return(n in e?e[n]:e["/*"])[0](t)}},q=function(e){return function(t){for(var r in e)setTimeout(k(e[r]),r);return t}},D=function(e){return function(t){var r=t.http;for(var n in e){var o=e[n];"onLoad"in o&&(u[n]=k(o.onLoad)),"onError"in o&&(c[n]=k(o.onError)),r[n]={request:o,response:{status:null,headers:null,body:null}}}return t}},S=["root","element","router","timer","httper","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],A={},F=0;F<S.length;F++){var H=S[F];switch(H){case"root":A.root=R;break;case"element":A.element=x;break;case"router":A.router=T;break;case"timer":A.timer=q;break;case"httper":A.httper=D;break;default:A[H]=x(H)}}return{main:function(e){p=e,g()},drivers:b,components:A,event:k,run:g,version:"1.0.0-beta.7"}}));