/**
 * Moon v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,(function(){"use strict";var e,t,r={driver:{input:function(){return e},output:function(t){e=t}}};function a(e){var r={};for(var a in t)r[a]=t[a].input();var n=e(r);for(var o in n)t[o].output(n[o])}function n(e,t,r){this.node=e,this.element=t,this.children=r}function o(e,t){this.name=e,this.data=t}var i={};function s(e,t,r){if("ariaset"===t)for(var a in r)e.setAttribute("aria-"+a,r[a]);else{var n=e[t];for(var o in r)n[o]=r[o]}}function l(e,t,r,a){for(var n in r)if(!(n in a))switch(t){case"ariaset":e.removeAttribute("aria-"+n);break;case"dataset":delete e.dataset[n];break;default:e.style[n]=""}}var u=null;function c(){}function d(e){var t,r=e.name,a=[];if("text"===r)t=document.createTextNode(e.data.data);else{t=document.createElement(r);var o=e.data;for(var i in o){var l=o[i];if(64===i.charCodeAt(0)){var u=t.MoonEvent;null===u&&(u=t.MoonEvent=new c),u[i]=l,t.addEventListener(i.slice(1),u)}else switch(i){case"ariaset":case"dataset":case"style":s(t,i,l);break;case"focus":l&&t.focus();break;case"class":t.className=l;break;case"for":t.htmlFor=l;break;case"children":for(var f=0;f<l.length;f++){var v=d(l[f]);a.push(v),t.appendChild(v.element)}break;default:t[i]=l}}}return new n(e,t,a)}c.prototype.handleEvent=function(e){a(this["@"+(u=e).type])},Node.prototype.MoonEvent=null;for(var f=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],v={node:function(e){return function(t){return new o(e,t)}}},m=function(e){var t=f[e];v[t]=function(e){return new o(t,e)}},p=0;p<f.length;p++)m(p);var h={input:function(){return Date.now()},output:function(e){var t=function(t){setTimeout((function(){a(e[t])}),t)};for(var r in e)t(r)}},b=null,g=/^([^:]+):\s*([^]*?)\s*$/gm;return{data:r,http:{driver:{input:function(){return b},output:function(e){for(var t=function(t){var r=e[t],n=new XMLHttpRequest;if(n.responseType="responseType"in r?r.responseType:"text",n.onload=function(){for(var e,t={},o=n.getAllResponseHeaders();null!==(e=g.exec(o));)t[e[1]]=e[2];b={status:n.status,headers:t,body:n.response},"onLoad"in r&&a(r.onLoad)},n.onerror=function(){b=null,"onError"in r&&a(r.onError)},n.open("method"in r?r.method:"GET",r.url),"headers"in r){var o=r.headers;for(var i in o)n.setRequestHeader(i,o[i])}n.send("body"in r?r.body:null)},r=0;r<e.length;r++)t(r)}}},run:a,time:{driver:h},use:function(e){t=e},view:{driver:function(e){"string"==typeof e&&(e=document.querySelector(e));for(var t=e.attributes,r={},a=0;a<t.length;a++){var f=t[a];r[f.name]=f.value}var v=new n(new o(e.tagName.toLowerCase(),r,[]),e,[]);return{input:function(){return u},output:function(e){!function e(t,r){var a,n,o=t.node;if(o!==r){var u=o.name,f=t.element;if(t.node=r,u!==r.name){var v=d(r),m=v.element;t.element=m,t.children=v.children,f.parentNode.replaceChild(m,f)}else{var p=o.data,h=r.data;for(var b in h){var g=p[b],k=h[b];if(g!==k)if(64===b.charCodeAt(0)){var y=f.MoonEvent;null===y&&(y=f.MoonEvent=new c),b in y?y[b]=k:(y[b]=k,f.addEventListener(b.slice(1),y))}else switch(b){case"ariaset":case"dataset":case"style":s(f,b,k),void 0!==g&&l(f,b,g,k);break;case"focus":k?f.focus():f.blur();break;case"class":f.className=k;break;case"for":f.htmlFor=k;break;case"children":var w=t.children,E=w.length,x=k.length;if(E===x)for(var C=0;C<E;C++)e(w[C],k[C]);else if(E>x){for(var M=0;M<x;M++)e(w[M],k[M]);for(var L=x;L<E;L++)f.removeChild(w.pop().element)}else{for(var N=0;N<E;N++)e(w[N],k[N]);for(var q=E;q<x;q++){var A=d(k[q]);w.push(A),f.appendChild(A.element)}}break;default:f[b]=k}}for(var T in p)if(!(T in h))if(64===T.charCodeAt(0)){var F=f.MoonEvent;delete F[T],f.removeEventListener(T.slice(1),F)}else switch(T){case"ariaset":case"dataset":case"style":l(f,T,p[T],{});break;case"focus":p.focus&&f.blur();break;case"class":f.className="";break;case"for":f.htmlFor="";break;case"children":for(var H=t.children,R=H.length,j=0;j<R;j++)f.removeChild(H.pop().element);break;default:a=u,f[n=T]=a in i?i[a][n]:(i[a]=document.createElement(a))[n]}}}}(v,e)}}},m:v}}}));