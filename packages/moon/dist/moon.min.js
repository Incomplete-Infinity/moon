/**
 * Moon v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,r){"undefined"==typeof module?e.Moon=r():module.exports=r()}(this,(function(){"use strict";var e,r;function t(r){var t={};for(var n in e)t[n]=e[n].input();var a=r(t);for(var o in a)e[o].output(a[o])}var n={driver:{input:function(){return r},output:function(e){r=e}}};function a(e,r){this.name=e,this.data=r}var o={};var i,s,u=null;function l(){}function d(e){var r=e.name;if("text"===r)return document.createTextNode(e.data.data);var t=document.createElement(r),n=e.data;for(var a in n){var o=n[a];if(64===a.charCodeAt(0)){var i=t.MoonEvent;null===i&&(i=t.MoonEvent=new l),i[a]=o,t.addEventListener(a.slice(1),i)}else switch(a){case"attributes":for(var s in o)t.setAttribute(s,o[s]);break;case"style":var u=t.style;for(var c in o)u[c]=o[c];break;case"focus":o&&t.focus();break;case"class":t.className=o;break;case"for":t.htmlFor=o;break;case"children":for(var f=t.MoonChildren=[],v=0;v<o.length;v++){var p=d(o[v]);f.push(p),t.appendChild(p)}break;default:t[a]=o}}return t}l.prototype.handleEvent=function(e){t(this["@"+(u=e).type])},Node.prototype.MoonChildren=null,Node.prototype.MoonEvent=null;for(var c=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],f={node:function(e){return function(r){return new a(e,r)}}},v=function(e){var r=c[e];f[r]=function(e){return new a(r,e)}},p=0;p<c.length;p++)v(p);var m={driver:function(e){for(var r=(s="string"==typeof e?document.querySelector(e):e).attributes,t={},n=0;n<r.length;n++){var c=r[n];t[c.name]=c.value}return i=new a(s.tagName.toLowerCase(),t),{input:function(){return u},output:function(e){if(i.name===e.name)!function e(r,t,n){var a=r.data,i=n.data;for(var s in i){var u=a[s],c=i[s];if(u!==c)if(64===s.charCodeAt(0)){var f=t.MoonEvent;null===f&&(f=t.MoonEvent=new l),s in f?f[s]=c:(f[s]=c,t.addEventListener(s.slice(1),f))}else switch(s){case"attributes":if(void 0===u)for(var v in c)t.setAttribute(v,c[v]);else{for(var p in c){var m=c[p];u[p]!==m&&t.setAttribute(p,m)}for(var h in u)h in c||t.removeAttribute(h)}break;case"style":var b=t.style;if(void 0===u)for(var g in c)b[g]=c[g];else{for(var k in c){var y=c[k];u[k]!==y&&(b[k]=y)}for(var C in u)C in c||(b[C]="")}break;case"focus":c?t.focus():t.blur();break;case"class":t.className=c;break;case"for":t.htmlFor=c;break;case"children":var E=c.length;if(void 0===u)for(var M=t.MoonChildren=[],w=0;w<E;w++){var x=d(c[w]);M.push(x),t.appendChild(x)}else{var A=u.length;if(A===E)for(var N=t.MoonChildren,L=0;L<A;L++){var q=u[L],T=c[L];if(q!==T)if(q.name===T.name)e(q,N[L],T);else{var F=d(T);t.replaceChild(F,N[L]),N[L]=F}}else if(A>E){for(var H=t.MoonChildren,R=0;R<E;R++){var S=u[R],j=c[R];if(S!==j)if(S.name===j.name)e(S,H[R],j);else{var D=d(j);t.replaceChild(D,H[R]),H[R]=D}}for(var G=E;G<A;G++)t.removeChild(H.pop())}else{for(var X=t.MoonChildren,$=0;$<A;$++){var z=u[$],B=c[$];if(z!==B)if(z.name===B.name)e(z,X[$],B);else{var I=d(B);t.replaceChild(I,X[$]),X[$]=I}}for(var J=A;J<E;J++){var K=d(c[J]);X.push(K),t.appendChild(K)}}}break;default:t[s]=c}}var O,P,Q=r.name;for(var U in a)if(!(U in i))if(64===U.charCodeAt(0)){var V=t.MoonEvent;delete V[U],t.removeEventListener(U.slice(1),V)}else switch(U){case"attributes":var W=a.attributes;for(var Y in W)t.removeAttribute(Y);break;case"focus":t.blur();break;case"class":t.className="";break;case"for":t.htmlFor="";break;case"children":for(var Z=a.children.length,_=t.MoonChildren,ee=0;ee<Z;ee++)t.removeChild(_.pop());break;default:O=Q,t[P=U]=O in o?o[O][P]:(o[O]=document.createElement(O))[P]}}(i,s,e);else{var r=d(e);s.parentNode.replaceChild(r,s),s=r}i=e}}},m:f},h={driver:{input:function(){return Date.now()},output:function(e){var r=function(r){setTimeout((function(){t(e[r])}),r)};for(var n in e)r(n)}}},b=null,g=/^([^:]+):\s*([^]*?)\s*$/gm,k={driver:{input:function(){return b},output:function(e){for(var r=function(r){var n=e[r],a=new XMLHttpRequest;if(a.responseType="responseType"in n?n.responseType:"text",a.onload=function(){for(var e,r={},o=a.getAllResponseHeaders();null!==(e=g.exec(o));)r[e[1]]=e[2];b={status:a.status,headers:r,body:a.response},"onLoad"in n&&t(n.onLoad)},a.onerror=function(){b=null,"onError"in n&&t(n.onError)},a.open("method"in n?n.method:"GET",n.url),"headers"in n){var o=n.headers;for(var i in o)a.setRequestHeader(i,o[i])}a.send("body"in n?n.body:null)},n=0;n<e.length;n++)r(n)}}},y=location.pathname;return{data:n,http:k,route:{driver:{input:function(){return y},output:function(e){y=e,history.pushState(null,"",y)}},router:function(e){for(var r=e.route,t="/",n=e.routes,a=1;a<r.length;a++){var o=r[a];"/"===o?(n=(t in n?n[t]:n["/*"])[1],t="/"):t+=o}return(t in n?n[t]:n["/*"])[0](e)}},run:t,time:h,use:function(r){e=r},version:"1.0.0-beta.4",view:m}}));