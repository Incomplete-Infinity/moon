/**
 * Moon v1.0.0-beta.2
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,function(){"use strict";var b={element:0,text:1,component:2};var y,A=/^\s+$/,N=/<([\w\d-_]+)([^>]*?)(\/?)>/g,k=/\s*([\w\d-_:@]*)(?:=(?:("[^"]*"|'[^']*')|{([^{}]*)}))?/g,t=/"[^"]*"|'[^']*'|\d+[a-zA-Z$_]\w*|\.[a-zA-Z$_]\w*|[a-zA-Z$_]\w*:|([a-zA-Z$_]\w*)/g,n=["NaN","false","in","null","this","true","typeof","undefined","window"];function E(e){return e.replace(t,function(e,t){return void 0===t||"$"===t[0]||-1!==n.indexOf(t)?e:"data."+t})}function r(e){e=e.trim();for(var t=[],n=0;n<e.length;){var r=e[n];if("<"===r){var a=e[n+1];if("/"===a){var i=e.indexOf(">",n+2),o=e.slice(n+2,i);0,t.push({type:"tagClose",value:o}),n=i+1;continue}if("!"===a&&"-"===e[n+2]&&"-"===e[n+3]){var l=e.indexOf("--\x3e",n+4);0,n=l+3;continue}N.lastIndex=n;var u=N.exec(e);0;for(var d=u[0],s=u[1],f=u[2],p=u[3],c={},v=void 0;null!==(v=k.exec(f));){var h=v[0],m=v[1],g=v[2],w=v[3];0===h.length?k.lastIndex+=1:(c[m]=void 0===w?void 0===g?'""':g:E(w),"@"===m[0]&&(c[m]="function($event){"+c[m]+"}"))}t.push({type:"tagOpen",value:s,attributes:c,closed:"/"===p}),n+=d.length}else if("{"===r){var b="";for(n+=1;n<e.length;n++){var y=e[n];if("}"===y)break;b+=y}t.push({type:"tagOpen",value:"text",attributes:{"":E(b)},closed:!0}),n+=1}else{for(var x="";n<e.length;n++){var O=e[n];if("<"===O||"{"===O)break;x+=O}A.test(x)||t.push({type:"tagOpen",value:"text",attributes:{"":'"'+x+'"'},closed:!0})}}return t}function s(e,t,n,r){this.message=e,this.start=t,this.end=n,this.next=r}function f(e,t,n){var r=n[e],a=n[t-1],i=t-e;if(0==i)return new s("",e,t);if(1==i)return"tagOpen"===r.type&&!0===r.closed?{type:r.value,attributes:r.attributes,children:[]}:new s("",e,t);if("tagOpen"!==r.type||"tagClose"!==a.type||r.value!==a.value)return new s("",e,t);var o=function e(t,n,r){var a;if(0==n-t)return[];for(var i=t+1;i<=n;i++){var o=f(t,i,r);if(o instanceof s)a=o;else{var l=e(i,n,r);if(!(l instanceof s)){for(var u=[o],d=0;d<l.length;d++)u.push(l[d]);return u}}}return new s("",t,n,a)}(e+1,t-1,n);return o instanceof s?new s("",e,t,o):{type:r.value,attributes:r.attributes,children:o}}function a(e){var t=f(0,e.length,e);return t}var x=0;function O(e){y=e}function S(e){x=e}function C(e,t,n){var r,a=P(t.children[0],t,0,n);return a.isStatic?(r=e+"=m["+x+"];",n.push(a),S(x+1)):r=""+a.prelude+e+"="+a.node+";",r}function P(e,t,n,r){var a,i=e.type,o=!0;if("if"===i)return function(e,t,n,r){var a="m"+y,i="",o=!0;if(O(y+1),i+="var "+a+";if("+e.attributes[""]+"){"+C(a,e,r)+"}",null!==t)for(var l=t.children,u=n+1;u<l.length;){var d=l[u];if("else-if"===d.type)i+="else if("+d.attributes[""]+"){"+C(a,d,r)+"}",l.splice(u,1);else{if("else"!==d.type)break;i+="else{"+C(a,d,r)+"}",o=!1,l.splice(u,1)}}return o&&(i+="else{"+a+"=m["+x+"];}",r.push({prelude:"",node:"{type:"+b.text+',name:"text",data:{"":"",children:[]}}',isStatic:!0}),S(x+1)),{prelude:i,node:a,isStatic:!1}}(e,t,n,r);if("for"===i)return function(e,t){var n,r,a="m"+y,i=e.attributes[""].split(","),o=e.attributes.of,l=e.attributes.in;O(y+1);var u,d=P(e.children[0],e,0,t);return d.isStatic?(u=a+".push(m["+x+"]);",t.push(d),S(x+1)):u=d.prelude+a+".push("+d.node+");",r=void 0===o?"for(var "+(n=i[0])+" in "+l+"){"+(2===i.length?"var "+i[1]+"="+l+"["+n+"];":"")+u+"}":"for(var "+(n=2===i.length?i[1]:"mi")+"=0;"+n+"<"+o+".length;"+n+"++){var "+i[0]+"="+o+"["+n+"];"+u+"}",{prelude:"var "+a+"=[];"+r,node:"{type:"+b.element+',name:"span",data:{children:'+a+"}}",isStatic:!1}}(e,r);a="text"===i?b.text:i[0]===i[0].toLowerCase()?b.element:b.component;var l=e.attributes,u="",d="{",s="";for(var f in l){var p=l[f];"@"!==f[0]&&'"'!==p[0]&&"'"!==p[0]&&(o=!1),d+=s+'"'+f+'":'+p,s=","}if(void 0===l.children){var c=e.children,v=[];d+=s+"children:[",s="";for(var h=0;h<c.length;h++){var m=P(c[h],e,h,r);m.isStatic||(o=!1),v.push(m)}for(var g=0;g<v.length;g++){var w=v[g];o||!w.isStatic?(u+=w.prelude,d+=s+w.node):(d+=s+"m["+x+"]",r.push(w),S(x+1)),s=","}d+="]"}return{prelude:u,node:"{type:"+a+',name:"'+i+'",data:'+d+"}}",isStatic:o}}function i(e){var t=[];O(0);var n=x,r=P(e,null,0,t),a=r.prelude,i=r.node;if(r.isStatic)return S(x+1),"if(m["+n+"]===undefined){"+a+"m["+n+"]="+i+";}return m["+n+"];";if(0===t.length)return a+"return "+i+";";for(var o="if(m["+n+"]===undefined){",l=0;l<t.length;l++){var u=t[l];o+=u.prelude+"m["+(n+l)+"]="+u.node+";"}return""+(o+="}")+a+"return "+i+";"}function o(e){return i(a(r(e)))}var d,p,l,w,u={},c={},v=[];function h(e){p=e}var $=[],_={updateText:0,setAttributes:1,appendElement:2,removeElement:3,replaceElement:4};function q(e){var t,n=[];if(e.type===b.text)t=document.createTextNode(e.data[""]);else{var r=e.data;for(var a in t=document.createElement(e.name),r){var i=r[a];"@"===a[0]?t.addEventListener(a.slice(1),i):"children"!==a&&!1!==i&&t.setAttribute(a,i)}for(var o=r.children,l=0;l<o.length;l++){var u=q(o[l]);t.appendChild(u.element),n.push(u)}}return{element:t,node:e,children:n}}function m(e,t,n){for(;;){var r=e.pop(),a=t.pop();if(r.node!==a)if(r.node.name!==a.name)n.push({type:_.replaceElement,nodeOld:r,nodeNew:a,nodeParent:null});else if(r.node.type===b.text)n.push({type:_.updateText,nodeOld:r,nodeNew:a,nodeParent:null});else{n.push({type:_.setAttributes,nodeOld:r,nodeNew:a,nodeParent:null});var i=r.children,o=a.data.children,l=i.length,u=o.length;if(l===u)for(var d=0;d<l;d++)e.push(i[d]),t.push(o[d]);else if(u<l){for(var s=0;s<u;s++)e.push(i[s]),t.push(o[s]);for(var f=u;f<l;f++)n.push({type:_.removeElement,nodeOld:i[f],nodeNew:null,nodeParent:r})}else{for(var p=0;p<l;p++)e.push(i[p]),t.push(o[p]);for(var c=l;c<u;c++)n.push({type:_.appendElement,nodeOld:null,nodeNew:o[c],nodeParent:r})}}if(0===e.length){g(n);break}if(16<=performance.now()-w){requestAnimationFrame(function(){w=performance.now(),m(e,t,n)});break}}}function g(e){for(var t=0;t<e.length;t++){var n=e[t];switch(n.type){case _.updateText:var r=n.nodeOld,a=n.nodeNew;r.element.textContent=a.data[""],r.node=a;break;case _.setAttributes:var i=n.nodeOld,o=i.element,l=n.nodeNew,u=l.data;for(var d in u){var s=u[d];"@"!==d[0]&&"children"!==d&&(!1===s?o.removeAttribute(d):o.setAttribute(d,s))}i.node=l;break;case _.appendElement:var f=n.nodeParent,p=q(n.nodeNew);f.element.appendChild(p.element),f.children.push(p);break;case _.removeElement:var c=n.nodeParent;c.element.removeChild(c.children.pop().element);break;case _.replaceElement:var v=n.nodeOld,h=v.element,m=q(n.nodeNew),g=m.element;h.parentNode.replaceChild(g,h),v.element=g,v.node=m.node,v.children=m.children}}$.shift(),0!==$.length&&(16<=performance.now()-w?requestAnimationFrame(function(){w=performance.now(),F()}):F())}function F(){var e=$[0];for(var t in e)u[t]=e[t];var n=l(u);h(n),function e(t,n,r){for(;;){var a=t.pop(),i=n.pop(),o=r.pop();a.type===b.component&&(a=c[a.name](a.data),null===i?h(a):i.data.children[o]=a);for(var l=a.data.children,u=0;u<l.length;u++)t.push(l[u]),n.push(a),r.push(u);if(0===t.length){m([d],[p],[]);break}if(16<=performance.now()-w){requestAnimationFrame(function(){w=performance.now(),e(t,n,r)});break}}}([n],[null],[0])}function z(e){$.push(e),1===$.length&&requestAnimationFrame(function(){w=performance.now(),F()})}function e(t){var e=function(e,t){return void 0===e?t:e}(t.name,"Root");delete t.name;var n=t.view;delete t.view,"string"==typeof n&&(n=new Function("m","data",o(n)));var r="string"==typeof t.root?document.querySelector(t.root):t.root;delete t.root;var a=function(e){return n(v,function(e,t){var n={};for(var r in e)n[r]=e[r];for(var a in t)a in e||(n[a]=t[a]);return n}(e,t))};void 0===r?c[e]=a:(function(e){d=e}({element:r,node:{type:b.element,name:r.tagName.toLowerCase(),data:{children:[]}},children:[]}),function(e){l=e}(a),z(t))}return e.lex=r,e.parse=a,e.generate=i,e.compile=o,e.components=c,e.set=z,e});