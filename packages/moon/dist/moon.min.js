/**
 * Moon v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,(function(){"use strict";var e,t,r={driver:{input:function(){return e},output:function(t){e=t}}};function a(e){var r={};for(var a in t)r[a]=t[a].input();var n=e(r);for(var o in n)t[o].output(n[o])}function n(e,t,r){this.node=e,this.element=t,this.children=r}function o(e,t){this.name=e,this.data=t}var i={};var s=null;function l(){}function u(e){var t,r=e.name,a=[];if("text"===r)t=document.createTextNode(e.data.data);else{t=document.createElement(r);var o=e.data;for(var i in o){var s=o[i];if(64===i.charCodeAt(0)){var d=t.MoonEvent;null===d&&(d=t.MoonEvent=new l),d[i]=s,t.addEventListener(i.slice(1),d)}else switch(i){case"ariaset":for(var c in s)t.setAttribute("aria-"+c,s[c]);break;case"dataset":for(var f in s)t.dataset[f]=s[f];break;case"style":for(var v in s)t.style[v]=s[v];break;case"focus":s&&t.focus();break;case"class":t.className=s;break;case"for":t.htmlFor=s;break;case"children":for(var m=0;m<s.length;m++){var p=u(s[m]);a.push(p),t.appendChild(p.element)}break;default:t[i]=s}}}return new n(e,t,a)}l.prototype.handleEvent=function(e){a(this["@"+(s=e).type])},Node.prototype.MoonEvent=null;for(var d=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],c={node:function(e){return function(t){return new o(e,t)}}},f=function(e){var t=d[e];c[t]=function(e){return new o(t,e)}},v=0;v<d.length;v++)f(v);var m={input:function(){return Date.now()},output:function(e){var t=function(t){setTimeout((function(){a(e[t])}),t)};for(var r in e)t(r)}},p=null,h=/^([^:]+):\s*([^]*?)\s*$/gm;return{data:r,http:{driver:{input:function(){return p},output:function(e){for(var t=function(t){var r=e[t],n=new XMLHttpRequest;if(n.responseType="responseType"in r?r.responseType:"text",n.onload=function(){for(var e,t={},o=n.getAllResponseHeaders();null!==(e=h.exec(o));)t[e[1]]=e[2];p={status:n.status,headers:t,body:n.response},"onLoad"in r&&a(r.onLoad)},n.onerror=function(){p=null,"onError"in r&&a(r.onError)},n.open("method"in r?r.method:"GET",r.url),"headers"in r){var o=r.headers;for(var i in o)n.setRequestHeader(i,o[i])}n.send("body"in r?r.body:null)},r=0;r<e.length;r++)t(r)}}},run:a,time:{driver:m},use:function(e){t=e},view:{driver:function(e){"string"==typeof e&&(e=document.querySelector(e));for(var t=e.attributes,r={},a=0;a<t.length;a++){var d=t[a];r[d.name]=d.value}var c=new n(new o(e.tagName.toLowerCase(),r),e,[]);return{input:function(){return s},output:function(e){!function e(t,r){var a,n,o=t.node,s=o.name,d=t.element;if(t.node=r,s!==r.name){var c=u(r),f=c.element;t.element=f,t.children=c.children,d.parentNode.replaceChild(f,d)}else{var v=o.data,m=r.data;for(var p in m){var h=v[p],b=m[p];if(h!==b)if(64===p.charCodeAt(0)){var k=d.MoonEvent;null===k&&(k=d.MoonEvent=new l),p in k?k[p]=b:(k[p]=b,d.addEventListener(p.slice(1),k))}else switch(p){case"ariaset":for(var g in b){var y=void 0===h?h:h[g],w=b[g];y!==w&&d.setAttribute("aria-"+g,w)}if(void 0!==h)for(var E in h)E in b||d.removeAttribute("aria-"+E);break;case"dataset":for(var x in b){var C=void 0===h?h:h[x],A=b[x];C!==A&&(d.dataset[x]=A)}if(void 0!==h)for(var M in h)M in b||delete d.dataset[M];break;case"style":for(var L in b){var N=void 0===h?h:h[L],q=b[L];N!==q&&(d.style[L]=q)}if(void 0!==h)for(var T in h)T in b||(d.style[T]="");break;case"focus":b?d.focus():d.blur();break;case"class":d.className=b;break;case"for":d.htmlFor=b;break;case"children":var F=t.children,H=F.length,R=b.length;if(H===R)for(var j=0;j<H;j++){var D=b[j];h[j]!==D&&e(F[j],D)}else if(H>R){for(var G=0;G<R;G++){var S=b[G];h[G]!==S&&e(F[G],S)}for(var X=R;X<H;X++)d.removeChild(F.pop().element)}else{for(var $=0;$<H;$++){var z=b[$];h[$]!==z&&e(F[$],z)}for(var B=H;B<R;B++){var I=u(b[B]);F.push(I),d.appendChild(I.element)}}break;default:d[p]=b}}for(var J in v)if(!(J in m))if(64===J.charCodeAt(0)){var K=d.MoonEvent;delete K[J],d.removeEventListener(J.slice(1),K)}else switch(J){case"ariaset":var O=v[J];for(var P in O)d.removeAttribute("aria-"+P);break;case"dataset":var Q=v[J];for(var U in Q)delete d.dataset[U];break;case"focus":v.focus&&d.blur();break;case"class":d.className="";break;case"for":d.htmlFor="";break;case"children":for(var V=t.children,W=V.length,Y=0;Y<W;Y++)d.removeChild(V.pop().element);break;default:a=s,d[n=J]=a in i?i[a][n]:(i[a]=document.createElement(a))[n]}}}(c,e)}}},m:c}}}));