/**
 * Moon Browser v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(){"use strict";function i(e,n){this.expected=e,this.index=n}var t={type:function(r,a){return function(e,n){var t=a(e,n);return t instanceof i?t:[{type:r,value:t[0]},t[1]]}},EOF:function(e,n){return n===e.length?["EOF",n]:new i("EOF",n)},empty:function(e,n){return["",n]},any:function(e,n){return n<e.length?[e[n],n+1]:new i("any",n)},character:function(r){return function(e,n){var t=e[n];return t===r?[t,n+1]:new i('"'+r+'"',n)}},regex:function(r){return function(e,n){var t=e[n];return void 0!==t&&r.test(t)?[t,n+1]:new i(r.toString(),n)}},string:function(r){return function(e,n){var t=n+r.length;return e.slice(n,t)===r?[r,t]:new i('"'+r+'"',n)}},not:function(a){return function(e,n){if(n<e.length){for(var t=0;t<a.length;t++){var r=a[t];if(e.slice(n,n+r.length)===r)return new i('not "'+r+'"',n)}return[e[n],n+1]}return new i("not "+a.map(JSON.stringify).join(", "),n)}},or:function(a,o){return function(e,n){var t=a(e,n);if(t instanceof i){var r=o(e,n);return r instanceof i&&t.index>r.index?t:r}return t}},and:function(a,o){return function(e,n){var t=a(e,n);if(t instanceof i)return t;var r=o(e,t[1]);return r instanceof i?r:[[t[0],r[0]],r[1]]}},sequence:function(o){return function(e,n){for(var t=[],r=0;r<o.length;r++){var a=o[r](e,n);if(a instanceof i)return a;t.push(a[0]),n=a[1]}return[t,n]}},alternates:function(o){return function(e,n){for(var t=new i("alternates",-1),r=0;r<o.length;r++){var a=o[r](e,n);if(!(a instanceof i))return a;a.index>t.index&&(t=a)}return t}},many:function(a){return function(e,n){for(var t,r=[];!((t=a(e,n))instanceof i);)r.push(t[0]),n=t[1];return[r,n]}},many1:function(a){return function(e,n){var t=[],r=a(e,n);if(r instanceof i)return r;for(t.push(r[0]),n=r[1];!((r=a(e,n))instanceof i);)t.push(r[0]),n=r[1];return[t,n]}}},r={whitespace:t.alternates([t.character(" "),t.character("\t"),t.character("\n")]),whitespaces:function(e,n){return t.many(r.whitespace)(e,n)},identifier:t.many1(t.regex(/[@$\w.?]/)),string:t.alternates([t.sequence([t.character('"'),t.many(t.or(t.and(t.character("\\"),t.any),t.not(['"']))),t.character('"')]),t.sequence([t.character("'"),t.many(t.or(t.and(t.character("\\"),t.any),t.not(["'"]))),t.character("'")]),t.sequence([t.character("`"),t.many(t.or(t.and(t.character("\\"),t.any),t.not(["`"]))),t.character("`")])]),block:function(e,n){return t.type("block",t.sequence([t.character("{"),r.expression,t.character("}")]))(e,n)},value:function(e,n){return t.alternates([r.string,r.block,r.identifier])(e,n)},text:t.type("text",t.many1(t.not(["{","<"]))),attributes:function(e,n){return t.type("attributes",t.many(t.sequence([r.identifier,t.character("="),r.value,r.whitespaces])))(e,n)},node:function(e,n){return t.type("node",t.sequence([t.character("<"),r.whitespaces,r.value,r.whitespaces,t.string("#>")]))(e,n)},nodeData:function(e,n){return t.type("nodeData",t.sequence([t.character("<"),r.whitespaces,r.value,r.whitespaces,t.or(r.block,r.attributes),t.string("/>")]))(e,n)},nodeDataChildren:function(e,n){return t.type("nodeDataChildren",t.sequence([t.character("<"),r.whitespaces,r.value,r.whitespaces,r.attributes,t.character(">"),t.many(t.alternates([r.node,r.nodeData,r.nodeDataChildren,r.block,r.text])),t.string("</"),t.many(t.not([">"])),t.character(">")]))(e,n)},expression:function(e,n){return t.many(t.alternates([t.sequence([t.string("//"),t.many(t.not(["\n"]))]),t.sequence([t.string("/*"),t.many(t.not(["*/"])),t.string("*/")]),t.sequence([t.character("/"),t.many1(t.or(t.and(t.character("\\"),t.not(["\n"])),t.not(["/","\n"]))),t.character("/")]),r.block,r.string,r.node,r.nodeData,r.nodeDataChildren,t.and(t.alternates([t.character("/"),t.character("<"),t.empty]),t.many1(t.not(["/","{","}","<",'"',"'","`"])))]))(e,n)},main:function(e,n){return t.and(r.expression,t.EOF)(e,n)}};function a(e){return r.main(e,0)}function w(e){return"block"===e.type?"("+b(e.value[1])+")":b(e)}function b(e){var n=e.type;if("string"==typeof e)return e;if(Array.isArray(e)){for(var t="",r=0;r<e.length;r++)t+=b(e[r]);return t}if("block"===n)return b(e.value);if("text"===n)return"Moon.view.m.text({value:"+JSON.stringify(b(e.value))+"})";if("attributes"===n){for(var a=e.value,o="",i="",c=0;c<a.length;c++){var u=a[c];o+=i+'"'+b(u[0])+'":'+w(u[2])+b(u[3]),i=","}return{output:o,separator:i}}if("node"===n){var s=e.value;return b(s[1])+w(s[2])+b(s[3])}if("nodeData"===n){var f=e.value,l=f[4];return""+b(f[1])+w(f[2])+b(f[3])+"("+("attributes"===l.type?"{"+b(l).output+"}":w(l))+")"}if("nodeDataChildren"===n){var h,d=e.value,p=b(d[4]),v=d[6],y=v.length;if(0===y)h="";else{var m="";h=p.separator+"children:[";for(var g=0;g<y;g++){var x=v[g];"block"===x.type?h+=m+"Moon.view.m.text({value:"+w(x)+"})":h+=m+b(x),m=","}h+="]"}return""+b(d[1])+w(d[2])+b(d[3])+"({"+p.output+h+"})"}}function p(e,n){for(var t=n-e.length,r=0;r<t;r++)e=" "+e;return e}function o(e){console.error("[Moon] ERROR: "+e)}a.Error=i;var c,u={compile:function(e){var n=a(e);return n instanceof a.Error&&o("Invalid input to parser.\n\nAttempted to parse input.\n\nExpected "+n.expected+".\n\nReceived:\n\n"+function(e,n){for(var t=e.split("\n"),r=1,a=1,o=0;o<e.length;o++){var i=e[o];if(o===n){var c=r-1,u=r+1,s=Math.max(Math.floor(Math.log10(c)+1),Math.floor(Math.log10(r)+1),Math.floor(Math.log10(u)+1))+2,f=t[c-1],l=t[r-1],h=t[u-1],d="";return void 0!==f&&(d+=p(c+"| ",s)+f+"\n"),d+=p(r+"| ",s)+l+"\n"+p("| ",s)+p("^",a),void 0!==h&&(d+="\n"+p(u+"| ",s)+h),d}"\n"===i?(r+=1,a=1):a+=1}}(e,n.index)),b(n[0][0])},generate:b,parse:a},s=[];document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("script");c=document.querySelector("head");for(var n=0;n<e.length;n++){var t=e[n];"text/moon"===t.type&&s.push(t)}!function n(){if(0!==s.length){var t=s.shift(),r=t.src;if(0===r.length){var e=document.createElement("script");e.text=u.compile(t.text),c.appendChild(e),t.parentNode.removeChild(t),n()}else{var a=new XMLHttpRequest;a.onload=function(){if(a.readyState===a.DONE){if(0===a.status||200===a.status){var e=document.createElement("script");e.text=u.compile(a.responseText),c.appendChild(e)}else o('Failed to load script with source "'+r+'" and status '+a.status+".");t.parentNode.removeChild(t),n()}},a.open("GET",r,!0),a.send()}}}()})}();