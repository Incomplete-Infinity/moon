/**
 * Moon Browser v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(){"use strict";function o(e,n){this.expected=e,this.index=n}var t={type:function(r,a){return function(e,n){var t=a(e,n);return t instanceof o?t:[{type:r,value:t[0]},t[1]]}},EOF:function(e,n){return n===e.length?["EOF",n]:new o("EOF",n)},empty:function(e,n){return["",n]},any:function(e,n){return n<e.length?[e[n],n+1]:new o("any",n)},character:function(r){return function(e,n){var t=e[n];return t===r?[t,n+1]:new o('"'+r+'"',n)}},regex:function(r){return function(e,n){var t=e[n];return void 0!==t&&r.test(t)?[t,n+1]:new o(r.toString(),n)}},string:function(r){return function(e,n){var t=n+r.length;return e.slice(n,t)===r?[r,t]:new o('"'+r+'"',n)}},not:function(a){return function(e,n){if(n<e.length){for(var t=0;t<a.length;t++){var r=a[t];if(e.slice(n,n+r.length)===r)return new o('not "'+r+'"',n)}return[e[n],n+1]}return new o("not "+a.map(JSON.stringify).join(", "),n)}},or:function(a,c){return function(e,n){var t=a(e,n);if(t instanceof o){var r=c(e,n);return r instanceof o&&t.index>r.index?t:r}return t}},and:function(a,c){return function(e,n){var t=a(e,n);if(t instanceof o)return t;var r=c(e,t[1]);return r instanceof o?r:[[t[0],r[0]],r[1]]}},sequence:function(c){return function(e,n){for(var t=[],r=0;r<c.length;r++){var a=c[r](e,n);if(a instanceof o)return a;t.push(a[0]),n=a[1]}return[t,n]}},alternates:function(c){return function(e,n){for(var t=new o("alternates",-1),r=0;r<c.length;r++){var a=c[r](e,n);if(!(a instanceof o))return a;a.index>t.index&&(t=a)}return t}},many:function(a){return function(e,n){for(var t,r=[];!((t=a(e,n))instanceof o);)r.push(t[0]),n=t[1];return[r,n]}},many1:function(a){return function(e,n){var t=[],r=a(e,n);if(r instanceof o)return r;for(t.push(r[0]),n=r[1];!((r=a(e,n))instanceof o);)t.push(r[0]),n=r[1];return[t,n]}}},r={whitespace:t.alternates([t.character(" "),t.character("\t"),t.character("\n")]),whitespaces:function(e,n){return t.many(r.whitespace)(e,n)},identifier:t.many1(t.regex(/[@$\w.?]/)),string:t.alternates([t.sequence([t.character('"'),t.many(t.or(t.and(t.character("\\"),t.any),t.not(['"']))),t.character('"')]),t.sequence([t.character("'"),t.many(t.or(t.and(t.character("\\"),t.any),t.not(["'"]))),t.character("'")]),t.sequence([t.character("`"),t.many(t.or(t.and(t.character("\\"),t.any),t.not(["`"]))),t.character("`")])]),block:function(e,n){return t.type("block",t.sequence([t.character("{"),r.expression,t.character("}")]))(e,n)},value:function(e,n){return t.alternates([r.string,r.block,r.identifier])(e,n)},text:t.type("text",t.many1(t.alternates([t.and(t.character("\\"),t.character("{")),t.and(t.character("\\"),t.character("<")),t.not(["{","<"])]))),attributes:function(e,n){return t.type("attributes",t.many(t.sequence([r.identifier,t.character("="),r.value,r.whitespaces])))(e,n)},node:function(e,n){return t.type("node",t.sequence([t.character("<"),r.whitespaces,r.value,r.whitespaces,t.string("#>")]))(e,n)},nodeData:function(e,n){return t.type("nodeData",t.sequence([t.character("<"),r.whitespaces,r.value,r.whitespaces,t.or(r.block,r.attributes),t.string("/>")]))(e,n)},nodeDataChildren:function(e,n){return t.type("nodeDataChildren",t.sequence([t.character("<"),r.whitespaces,r.value,r.whitespaces,r.attributes,t.character(">"),t.many(t.alternates([r.node,r.nodeData,r.nodeDataChildren,r.block,r.text])),t.string("</"),t.many(t.not([">"])),t.character(">")]))(e,n)},expression:function(e,n){return t.many(t.alternates([t.sequence([t.string("//"),t.many(t.not(["\n"]))]),t.sequence([t.string("/*"),t.many(t.not(["*/"])),t.string("*/")]),t.sequence([t.character("/"),t.many1(t.or(t.and(t.character("\\"),t.not(["\n"])),t.not(["/","\n"]))),t.character("/")]),r.string,r.block,r.node,r.nodeData,r.nodeDataChildren,t.and(t.alternates([t.character("/"),t.character("<"),t.empty]),t.many1(t.not(["/","{","}","<",'"',"'","`"])))]))(e,n)},main:function(e,n){return t.and(r.expression,t.EOF)(e,n)}};function a(e){return r.main(e,0)}a.Error=o;var m=/^\s+$/;function g(e){return"block"===e.type?"("+w(e.value[1])+")":w(e)}function x(e){for(var n=e.value,t="",r="",a=0;a<n.length;a++){var c=n[a];t+=r+'"'+w(c[0])+'":'+g(c[2])+w(c[3]),r=","}return{output:t,separator:r}}function w(e){var n=e.type;if("string"==typeof e)return e;if(Array.isArray(e)){for(var t="",r=0;r<e.length;r++)t+=w(e[r]);return t}if("block"===n)return w(e.value);if("node"===n){var a=e.value;return w(a[1])+g(a[2])+w(a[3])}if("nodeData"===n){var c=e.value,o=c[4];return""+w(c[1])+g(c[2])+w(c[3])+"("+("attributes"===o.type?"{"+x(o).output+"}":w(o.value[1]))+")"}if("nodeDataChildren"===n){var i,u=e.value,s=x(u[4]),f=u[6],l=f.length;if(0===l)i="";else{var h="";i=s.separator+"children:[";for(var d=0;d<l;d++){var v=f[d],p=v.type;if("text"===p){var y=w(v.value);m.test(y)&&-1!==y.indexOf("\n")?i+=y:(i+=h+"Moon.view.m.text({data:"+JSON.stringify(y)+"})",h=",")}else h=(i+="block"===p?h+"Moon.view.m.text({data:"+w(v.value[1])+"})":h+w(v),",")}i+="]"}return""+w(u[1])+g(u[2])+w(u[3])+"({"+s.output+i+"})"}}function v(e,n){for(var t=n-e.length,r=0;r<t;r++)e=" "+e;return e}function c(e){console.error("[Moon] ERROR: "+e)}var i,u={compile:function(e){var n=a(e);return n instanceof a.Error&&c("Invalid input to parser.\n\nAttempted to parse input.\n\nExpected "+n.expected+".\n\nReceived:\n\n"+function(e,n){for(var t=e.split("\n"),r=1,a=1,c=0;c<e.length;c++){var o=e[c];if(c===n){var i=r-1,u=r+1,s=Math.max(Math.floor(Math.log10(i)+1),Math.floor(Math.log10(r)+1),Math.floor(Math.log10(u)+1))+2,f=t[i-1],l=t[r-1],h=t[u-1],d="";return void 0!==f&&(d+=v(i+"| ",s)+f+"\n"),d+=v(r+"| ",s)+l+"\n"+v("| ",s)+v("^",a),void 0!==h&&(d+="\n"+v(u+"| ",s)+h),d}"\n"===o?(r+=1,a=1):a+=1}}(e,n.index)),w(n[0][0])},generate:w,parse:a},s=[];document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("script");i=document.querySelector("head");for(var n=0;n<e.length;n++){var t=e[n];"text/moon"===t.type&&s.push(t)}!function n(){if(0!==s.length){var t=s.shift(),r=t.src;if(0===r.length){var e=document.createElement("script");e.text=u.compile(t.text),i.appendChild(e),t.parentNode.removeChild(t),n()}else{var a=new XMLHttpRequest;a.onload=function(){if(a.readyState===a.DONE){if(0===a.status||200===a.status){var e=document.createElement("script");e.text=u.compile(a.responseText),i.appendChild(e)}else c('Failed to load script with source "'+r+'" and status '+a.status+".");t.parentNode.removeChild(t),n()}},a.open("GET",r,!0),a.send()}}}()})}();