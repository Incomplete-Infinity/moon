/**
 * Moon Browser v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(){"use strict";function e(e,n){this.expected=e,this.index=n}var n={type:function(n,t){return function(r,a){var o=t(r,a);return o instanceof e?o:[{type:n,value:o[0]},o[1]]}},EOF:function(n,t){return t===n.length?["EOF",t]:new e("EOF",t)},empty:function(e,n){return["",n]},any:function(n,t){return t<n.length?[n[t],t+1]:new e("any",t)},character:function(n){return function(t,r){var a=t[r];return a===n?[a,r+1]:new e('"'+n+'"',r)}},regex:function(n){return function(t,r){var a=t[r];return void 0!==a&&n.test(a)?[a,r+1]:new e(n.toString(),r)}},string:function(n){return function(t,r){var a=r+n.length;return t.slice(r,a)===n?[n,a]:new e('"'+n+'"',r)}},not:function(n){return function(t,r){if(r<t.length){for(var a=0;a<n.length;a++){var o=n[a];if(t.slice(r,r+o.length)===o)return new e('not "'+o+'"',r)}return[t[r],r+1]}return new e("not "+n.map(JSON.stringify).join(", "),r)}},or:function(n,t){return function(r,a){var o=n(r,a);if(o instanceof e){var c=t(r,a);return c instanceof e&&o.index>c.index?o:c}return o}},and:function(n,t){return function(r,a){var o=n(r,a);if(o instanceof e)return o;var c=t(r,o[1]);return c instanceof e?c:[[o[0],c[0]],c[1]]}},sequence:function(n){return function(t,r){for(var a=[],o=0;o<n.length;o++){var c=n[o](t,r);if(c instanceof e)return c;a.push(c[0]),r=c[1]}return[a,r]}},alternates:function(n){return function(t,r){for(var a=new e("alternates",-1),o=0;o<n.length;o++){var c=n[o](t,r);if(!(c instanceof e))return c;c.index>a.index&&(a=c)}return a}},many:function(n){return function(t,r){for(var a,o=[];!((a=n(t,r))instanceof e);)o.push(a[0]),r=a[1];return[o,r]}},many1:function(n){return function(t,r){var a=[],o=n(t,r);if(o instanceof e)return o;for(a.push(o[0]),r=o[1];!((o=n(t,r))instanceof e);)a.push(o[0]),r=o[1];return[a,r]}}},t={whitespace:n.alternates([n.character(" "),n.character("\t"),n.character("\n")]),whitespaces:function(e,r){return n.many(t.whitespace)(e,r)},identifier:n.many1(n.regex(/[@$\w.]/)),string:n.alternates([n.sequence([n.character('"'),n.many(n.or(n.and(n.character("\\"),n.any),n.not(['"']))),n.character('"')]),n.sequence([n.character("'"),n.many(n.or(n.and(n.character("\\"),n.any),n.not(["'"]))),n.character("'")]),n.sequence([n.character("`"),n.many(n.or(n.and(n.character("\\"),n.any),n.not(["`"]))),n.character("`")])]),block:function(e,r){return n.type("block",n.sequence([n.character("{"),t.expression,n.character("}")]))(e,r)},value:function(e,r){return n.alternates([t.string,t.block,t.identifier])(e,r)},text:n.type("text",n.many1(n.or(n.and(n.character("\\"),n.any),n.not(["{","<"])))),attributes:function(e,r){return n.type("attributes",n.many(n.sequence([t.identifier,n.character("="),t.value,t.whitespaces])))(e,r)},node:function(e,r){return n.type("node",n.sequence([n.character("<"),t.whitespaces,t.value,t.whitespaces,n.string("#>")]))(e,r)},nodeData:function(e,r){return n.type("nodeData",n.sequence([n.character("<"),t.whitespaces,t.value,t.whitespaces,n.or(t.block,t.attributes),n.string("/>")]))(e,r)},nodeDataChildren:function(e,r){return n.type("nodeDataChildren",n.sequence([n.character("<"),t.whitespaces,t.value,t.whitespaces,t.attributes,n.character(">"),n.many(n.alternates([t.node,t.nodeData,t.nodeDataChildren,t.block,t.text])),n.string("</"),n.many(n.not([">"])),n.character(">")]))(e,r)},expression:function(e,r){return n.many(n.alternates([n.sequence([n.string("//"),n.many(n.not(["\n"]))]),n.sequence([n.string("/*"),n.many(n.not(["*/"])),n.string("*/")]),n.sequence([n.character("/"),n.many1(n.or(n.and(n.character("\\"),n.not(["\n"])),n.not(["/","\n"]))),n.character("/")]),t.string,t.block,t.node,t.nodeData,t.nodeDataChildren,n.and(n.alternates([n.character("/"),n.character("<"),n.empty]),n.many1(n.not(["/","{","}","<",'"',"'","`"])))]))(e,r)},main:function(e,r){return n.and(t.expression,n.EOF)(e,r)}};function r(e){return t.main(e,0)}r.Error=e;var a=/^\s+$/,o=/([^\\])("|\n)/g;function c(e){return"block"===e.type?"("+u(e.value[1])+")":u(e)}function i(e){for(var n=e.value,t="",r="",a=0;a<n.length;a++){var o=n[a];t+=r+'"'+u(o[0])+'":'+c(o[2])+u(o[3]),r=","}return{output:t,separator:r}}function u(e){var n=e.type;if("string"==typeof e)return e;if(Array.isArray(e)){for(var t="",r=0;r<e.length;r++)t+=u(e[r]);return t}if("block"===n)return u(e.value);if("node"===n){var s=e.value;return u(s[1])+c(s[2])+u(s[3])}if("nodeData"===n){var f=e.value,l=f[4];return""+u(f[1])+c(f[2])+u(f[3])+"("+("attributes"===l.type?"{"+i(l).output+"}":u(l.value[1]))+")"}if("nodeDataChildren"===n){var h,d=e.value,v=i(d[4]),p=d[6],y=p.length;if(0===y)h="";else{var m="";h=v.separator+"children:[";for(var g=0;g<y;g++){var x=p[g],w=x.type;if("text"===w){var b=u(x.value);a.test(b)&&-1!==b.indexOf("\n")?h+=b:(h+=m+'Moon.view.m.text({data:"'+b.replace(o,(function(e,n,t){return n+"\\"+t}))+'"})',m=",")}else"block"===w?(h+=m+"Moon.view.m.text({data:"+u(x.value[1])+"})",m=","):(h+=m+u(x),m=",")}h+="]"}return""+u(d[1])+c(d[2])+u(d[3])+"({"+v.output+h+"})"}}function s(e){console.error("[Moon] ERROR: "+e)}function f(e,n){for(var t=n-e.length,r=0;r<t;r++)e=" "+e;return e}var l,h={compile:function(e){var n=r(e);return n instanceof r.Error&&s("Invalid input to parser.\n\nAttempted to parse input.\n\nExpected "+n.expected+".\n\nReceived:\n\n"+function(e,n){for(var t=e.split("\n"),r=1,a=1,o=0;o<e.length;o++){var c=e[o];if(o===n){var i=r-1,u=r+1,s=Math.max(Math.floor(Math.log10(i)+1),Math.floor(Math.log10(r)+1),Math.floor(Math.log10(u)+1))+2,l=t[i-1],h=t[r-1],d=t[u-1],v="";return void 0!==l&&(v+=f(i+"| ",s)+l+"\n"),v+=f(r+"| ",s)+h+"\n"+f("| ",s)+f("^",a),void 0!==d&&(v+="\n"+f(u+"| ",s)+d),v}"\n"===c?(r+=1,a=1):a+=1}}(e,n.index)),u(n[0][0])},generate:u,parse:r,version:"1.0.0-beta.4"},d=[];document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll("script");l=document.querySelector("head");for(var n=0;n<e.length;n++){var t=e[n];"text/moon"===t.type&&d.push(t)}!function e(){if(0!==d.length){var n=d.shift(),t=n.src;if(0===t.length){var r=document.createElement("script");r.text=h.compile(n.text),l.appendChild(r),n.parentNode.removeChild(n),e()}else{var a=new XMLHttpRequest;a.onload=function(){if(a.readyState===a.DONE){if(0===a.status||200===a.status){var r=document.createElement("script");r.text=h.compile(a.responseText),l.appendChild(r)}else s('Failed to load script with source "'+t+'" and status '+a.status+".");n.parentNode.removeChild(n),e()}},a.open("GET",t,!0),a.send()}}}()}))}();