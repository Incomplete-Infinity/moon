/**
 * Moon Browser v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(){"use strict";var n=/[@$\w.]/;function t(n,t){this.expected=n,this.index=t}var e=function(n,e){return function(r,i){var a=e(r,i);return a instanceof t?a:[{type:n,value:a[0]},a[1]]}},r=function(n,e){return e===n.length?["EOF",e]:new t("EOF",e)},i=function(n,e){return e<n.length?[n[e],e+1]:new t("any",e)},a=function(n){return function(e,r){var i=e[r];return i===n?[i,r+1]:new t('"'+n+'"',r)}},o=function(n){return function(e,r){var i=e[r];return void 0!==i&&n.test(i)?[i,r+1]:new t(n.toString(),r)}},u=function(n){return function(e,r){var i=r+n.length;return e.slice(r,i)===n?[n,i]:new t('"'+n+'"',r)}},s=function(n){return function(e,r){if(r<e.length){for(var i=0;i<n.length;i++){var a=n[i];if(e.slice(r,r+a.length)===a)return new t('not "'+a+'"',r)}return[e[r],r+1]}return new t("not "+n.map(JSON.stringify).join(", "),r)}},f=function(n,e){return function(r,i){var a=n(r,i);if(a instanceof t){var o=e(r,i);return o instanceof t&&a.index>o.index?a:o}return a}},c=function(n,e){return function(r,i){var a=n(r,i);if(a instanceof t)return a;var o=e(r,a[1]);return o instanceof t?o:[[a[0],o[0]],o[1]]}},l=function(n){return function(e,r){for(var i=[],a=0;a<n.length;a++){var o=n[a](e,r);if(o instanceof t)return o;i.push(o[0]),r=o[1]}return[i,r]}},v=function(n){return function(e,r){for(var i=new t("alternates",-1),a=0;a<n.length;a++){var o=n[a](e,r);if(!(o instanceof t))return o;o.index>i.index&&(i=o)}return i}},p=function(n){return function(e,r){for(var i,a=[];!((i=n(e,r))instanceof t);)a.push(i[0]),r=i[1];return[a,r]}},d=function(n){return function(e,r){var i=[],a=n(e,r);if(a instanceof t)return a;for(i.push(a[0]),r=a[1];!((a=n(e,r))instanceof t);)i.push(a[0]),r=a[1];return[i,r]}},h={whitespaces:p(v([a(" "),a("\t"),a("\n")])),value:function(t,e){return v([d(o(n)),l([a('"'),p(f(c(a("\\"),i),s(['"']))),a('"')]),l([a("'"),p(f(c(a("\\"),i),s(["'"]))),a("'")]),l([a("`"),p(f(c(a("\\"),i),s(["`"]))),a("`")]),l([a("("),h.expression,a(")")]),l([a("["),h.expression,a("]")]),l([a("{"),h.expression,a("}")])])(t,e)},attributes:function(n,t){return e("attributes",p(l([h.value,a("="),h.value,h.whitespaces])))(n,t)},text:e("text",d(f(c(a("\\"),i),s(["{","<"])))),interpolation:function(n,t){return e("interpolation",l([a("{"),h.expression,a("}")]))(n,t)},node:function(n,t){return e("node",l([a("<"),h.whitespaces,h.value,h.whitespaces,u("#>")]))(n,t)},nodeData:function(n,t){return e("nodeData",l([a("<"),h.whitespaces,h.value,h.whitespaces,f(c(h.value,u("/>")),c(h.attributes,u("/>")))]))(n,t)},nodeDataChildren:function(n,t){return e("nodeDataChildren",l([a("<"),h.whitespaces,h.value,h.whitespaces,h.attributes,a(">"),p(v([h.node,h.nodeData,h.nodeDataChildren,h.text,h.interpolation])),u("</"),p(s([">"])),a(">")]))(n,t)},expression:function(n,t){return p(v([l([u("//"),p(s(["\n"]))]),l([u("/*"),p(s(["*/"])),u("*/")]),l([a("/"),d(f(c(a("\\"),s(["\n"])),s(["/","\n"]))),a("/")]),h.value,h.node,h.nodeData,h.nodeDataChildren,a("/"),a("<"),d(s(["/",'"',"'","`","(",")","[","]","{","}","<"]))]))(n,t)},main:function(n,t){return c(h.expression,r)(n,t)}};function x(n){return h.main(n,0)}x.Error=t;var g=/^\s+$/,w=/(^|[^\\])("|\n)/g;function m(n){var t=n.type;if("string"==typeof n)return n;if(Array.isArray(n)){for(var e="",r=0;r<n.length;r++)e+=m(n[r]);return e}if("attributes"===t){for(var i=n.value,a="",o="",u=0;u<i.length;u++){var s=i[u];a+=o+'"'+m(s[0])+'":'+m(s[2])+m(s[3]),o=","}return{output:a,separator:o}}if("text"===t){var f=m(n.value),c=g.test(f)&&-1!==f.indexOf("\n");return{output:c?f:'Moon.view.m.text({data:"'+f.replace(w,(function(n,t,e){return t+('"'===e?'\\"':"\\n\\\n")}))+'"})',isWhitespace:c}}if("interpolation"===t)return"Moon.view.m.text({data:"+m(n.value[1])+"})";if("node"===t){var l=n.value;return m(l[1])+m(l[2])+m(l[3])}if("nodeData"===t){var v=n.value,p=v[4][0],d=m(p);return""+m(v[1])+m(v[2])+m(v[3])+"("+("attributes"===p.type?"{"+d.output+"}":d)+")"}if("nodeDataChildren"===t){var h,x=n.value,y=m(x[4]),D=x[6],M=D.length;if(0===M)h="";else{var E="";h=y.separator+"children:[";for(var C=0;C<M;C++){var b=D[C],O=m(b);"text"===b.type?O.isWhitespace?h+=O.output:(h+=E+O.output,E=","):(h+=E+O,E=",")}h+="]"}return""+m(x[1])+m(x[2])+m(x[3])+"({"+y.output+h+"})"}}function y(n){console.error("[Moon] ERROR: "+n)}function D(n,t){for(var e=t-n.length,r=0;r<e;r++)n=" "+n;return n}var M,E={compile:function(n){var t=x(n);return t instanceof x.Error&&y("Invalid input to parser.\n\nAttempted to parse input.\n\nExpected "+t.expected+".\n\nReceived:\n\n"+function(n,t){for(var e=n.split("\n"),r=1,i=1,a=0;a<n.length;a++){var o=n[a];if(a===t){var u=r-1,s=r+1,f=Math.max(Math.floor(Math.log10(u)+1),Math.floor(Math.log10(r)+1),Math.floor(Math.log10(s)+1))+2,c=e[u-1],l=e[r-1],v=e[s-1],p="";return void 0!==c&&(p+=D(u+"| ",f)+c+"\n"),p+=D(r+"| ",f)+l+"\n"+D("| ",f)+D("^",i),void 0!==v&&(p+="\n"+D(s+"| ",f)+v),p}"\n"===o?(r+=1,i=1):i+=1}}(n,t.index)),m(t[0][0])},generate:m,parse:x,version:"1.0.0-beta.4"},C=[];document.addEventListener("DOMContentLoaded",(function(){var n=document.querySelectorAll("script");M=document.querySelector("head");for(var t=0;t<n.length;t++){var e=n[t];"text/moon"===e.type&&C.push(e)}!function n(){if(0!==C.length){var t=C.shift(),e=t.src;if(0===e.length){var r=document.createElement("script");r.text=E.compile(t.text),M.appendChild(r),t.parentNode.removeChild(t),n()}else{var i=new XMLHttpRequest;i.onload=function(){if(i.readyState===i.DONE){if(0===i.status||200===i.status){var r=document.createElement("script");r.text=E.compile(i.responseText),M.appendChild(r)}else y('Failed to load script with source "'+e+'" and status '+i.status+".");t.parentNode.removeChild(t),n()}},i.open("GET",e,!0),i.send()}}}()}))}();