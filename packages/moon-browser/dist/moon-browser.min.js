/**
 * Moon Browser v1.0.0-beta.3
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(){"use strict";var q=/^\s+$/;function A(e,t){return"\\"!==t&&('"'===e||"'"===e||"`"===e)}var M={element:0,text:1};function n(e){console.error("[Moon] ERROR: "+e)}var l,r=/"[^"]*"|'[^']*'|`[^`]*`|\d+[a-zA-Z$_]\w*|\.[a-zA-Z$_]\w*|[a-zA-Z$_]\w*:|([a-zA-Z$_]\w*)/g,$=/&amp;|&gt;|&lt;|&nbsp;|&quot;|\\|"|\n|\r/g,i=["Infinity","NaN","break","case","catch","class","const","continue","default","delete","do","else","extends","false","finally","for","function","if","in","instanceof","let","new","null","return","super","switch","this","throw","true","try","typeof","undefined","var","void","while","window"],z={class:"className",for:"htmlFor"},L={"&amp;":"&","&gt;":">","&lt;":"<","&nbsp;":" ","&quot;":'\\"',"\\":"\\\\",'"':'\\"',"\n":"\\n","\r":"\\r"};function R(e){for(var t;null!==(t=r.exec(e));){var a=t[1];if(void 0!==a&&-1===i.indexOf(a))return r.lastIndex=0,!1}return!(r.lastIndex=0)}function x(e){e=e.trim();for(var t=[],a=0;a<e.length;){var r=e[a];if("<"===r){var i=e[a+1];if("/"===i){var n=e.indexOf(">",a+2),l=e.slice(a+2,n);0,t.push({type:"tagClose",value:l}),a=n+1;continue}if("!"===i&&"-"===e[a+2]&&"-"===e[a+3]){var v=e.indexOf("--\x3e",a+4);0,a=v+3;continue}var u="",s="",f=!1,o={},c=!0,d=0;for(a++;a<e.length;a++){var b=e[a];if("{"===b?d+=1:"}"===b&&(d-=1),0===d&&(">"===b||"/"===b&&">"===e[a+1]&&(f=!0)&&(a+=1))){a+=1;break}if(c)q.test(b)?c=!1:"="===b?(c=!1,s+=b):u+=b;else if(A(b,e[a-1]))for(s+=b,a++;a<e.length;a++){var h=e[a];if(s+=h,A(h,e[a-1])&&h===b)break}else s+=b}for(var p=0;p<s.length;p++){var g=s[p];if(!q.test(g)){for(var m="",S="true";p<s.length&&(g=s[p],!q.test(g));p++){if("="===g){S="";break}m+=g}if(m in z&&(m=z[m]),0===S.length){var w=s[++p];"{"===w?w="}":S+=w,p+=1;for(var x=0;p<s.length;p++)if("{"===(g=s[p]))x+=1,S+=g;else if("}"===w&&A(g,s[p-1]))for(S+=g,p++;p<s.length;p++){var k=s[p];if(S+=k,A(k,s[p-1])&&k===g)break}else if(g===w){if("}"!==w){S+=g,o[m]={value:S,isStatic:!0};break}if(0===x){o[m]={value:S,isStatic:R(S)};break}x-=1,S+=g}else S+=g}else o[m]={value:S,isStatic:!0}}}t.push({type:"tagOpen",value:u,attributes:o,closed:f})}else if("{"===r){var y="",O=0;for(a++;a<e.length;a++){var C=e[a];if("{"===C)O+=1,y+=C;else if("}"===C){if(0===O)break;O-=1,y+=C}else if(A(C,e[a-1]))for(y+=C,a++;a<e.length;a++){var E=e[a];if(y+=E,A(E,e[a-1])&&E===C)break}else y+=C}t.push({type:"tagOpen",value:"text",attributes:{"":{value:y,isStatic:R(y)}},closed:!0}),a+=1}else{for(var M="";a<e.length;a++){var N=e[a];if("<"===N||"{"===N)break;M+=N}q.test(M)||t.push({type:"tagOpen",value:"text",attributes:{"":{value:'"'+M.replace($,function(e){return L[e]})+'"',isStatic:!0}},closed:!0})}}return t}function f(e,t,a,r){this.message=e,this.start=t,this.end=a,this.next=r}function k(e,t,a){var r=a[e],i=a[t-1],n=t-e;if(0==n)return new f("",e,t);if(1==n)return"tagOpen"===r.type&&!0===r.closed?{name:r.value,attributes:r.attributes,children:[]}:new f("",e,t);if("tagOpen"!==r.type||"tagClose"!==i.type||r.value!==i.value)return new f("",e,t);var l=function e(t,a,r){var i;if(0==a-t)return[];for(var n=t+1;n<=a;n++){var l=k(t,n,r);if(l instanceof f)i=l;else{var v=e(n,a,r);if(!(v instanceof f)){for(var u=[l],s=0;s<v.length;s++)u.push(v[s]);return u}}}return new f("",t,a,i)}(e+1,t-1,a);return l instanceof f?new f("",e,t,l):{name:r.value,attributes:r.attributes,children:l}}function N(e,t,a,r,i){var n=e+t;if(n in i)return{variable:a,variableStatic:i[n]};var l=i[n]="m"+a++;return r.push({variableStatic:l,variablePart:e+l+"="+t+";"}),{variable:a,variableStatic:l}}function Z(e,t,a,r,i){var n,l=_(t.children[0],t,0,a,r,i);if(a=l.variable,l.isStatic){var v=N(l.prelude,l.node,a,r,i);a=v.variable,n=e+"="+v.variableStatic+";"}else n=""+l.prelude+e+"="+l.node+";";return{clause:n,variable:a}}function _(e,t,a,r,i,n){var l=e.name,v=!0,u=!0;if("element"===l)return function(e,t){var a=e.attributes,r=a.name,i=a.data,n=a.children;return{prelude:"",node:"Moon.view.m("+M.element+","+r.value+","+i.value+","+n.value+")",isStatic:r.isStatic&&i.isStatic&&n.isStatic,variable:t}}(e,r);if("if"===l)return function(e,t,a,r,i,n){var l="m"+r,v="",u=!0,s=Z(l,e,r+1,i,n);if(v+="if("+e.attributes[""].value+"){"+s.clause+"}",r=s.variable,null!==t)for(var f=t.children,o=a+1;o<f.length;){var c=f[o];if("else-if"===c.name){var d=Z(l,c,r,i,n);v+="else if("+c.attributes[""].value+"){"+d.clause+"}",r=d.variable,f.splice(o,1)}else{if("else"!==c.name)break;var b=Z(l,c,r,i,n);v+="else{"+b.clause+"}",r=b.variable,u=!1,f.splice(o,1)}}if(u){var h=N("","Moon.view.m("+M.text+',"text",{"":""},[])',r,i,n);r=h.variable,v+="else{"+l+"="+h.variableStatic+";}"}return{prelude:v,node:l,isStatic:!1,variable:r}}(e,t,a,r,i,n);if("for"===l)return function(e,t,a,r){var i,n,l,v,u,s="m"+t,f="m"+(t+1),o="m"+(t+2),c=e.attributes,d=c[""].value,b=_(e.children[0],e,0,t+3,a,r);if(t=b.variable,b.isStatic){var h=N(b.prelude,b.node,t,a,r);t=h.variable,i="return "+h.variableStatic+";"}else i=b.prelude+"return "+b.node+";";if(i=f+"=function("+d+"){"+i+"};",v="in"in c?(l="for("+o+" in "+(n=c.in.value)+"){",o+","+n+"["+o+"]"):(l="for("+o+"=0;"+o+"<"+(n=c.of.value)+".length;"+o+"++){",n+"["+o+"],"+o),"data"in c)u=c.data.value;else{var p=N("","{}",t,a,r);t=p.variable,u=p.variableStatic}return{prelude:s+"=[];"+i+l+s+".push("+f+"("+v+"));}",node:"Moon.view.m("+M.element+","+("name"in c?c.name.value:'"span"')+","+u+","+s+")",isStatic:!1,variable:t}}(e,r,i,n);var s,f=e.attributes,o="",c="",d="",b="",h="";for(var p in f){var g=f[p];"children"===p?(g.isStatic||(u=!1),d=g.value):(g.isStatic||(v=!1),c+=b+'"'+p+'":'+g.value,b=",")}if(!("children"in f)){var m=e.children,S=[];d+="[";for(var w=0;w<m.length;w++){var x=_(m[w],e,w,r,i,n);x.isStatic||(u=!1),r=x.variable,S.push(x)}for(var k=0;k<S.length;k++){var y=S[k];if(u||!y.isStatic)o+=y.prelude,d+=h+y.node;else{var O=N(y.prelude,y.node,r,i,n);r=O.variable,d+=h+O.variableStatic}h=","}d+="]"}if(!v&&u){var C=N("",d,r,i,n);r=C.variable,d=C.variableStatic}if(l[0]===l[0].toUpperCase())return{prelude:o,node:l+"({"+c+b+"children:"+d+"})",isStatic:v&&u,variable:r};if(s="text"===l?M.text:M.element,c="{"+c+"}",v&&!u){var E=N("",c,r,i,n);r=E.variable,c=E.variableStatic}return{prelude:o,node:"Moon.view.m("+s+',"'+l+'",'+c+","+d+")",isStatic:v&&u,variable:r}}function v(e){for(var t,a="",r=0,i=0;i<e.length;){var n=e[i];if("("===n){for(a+=n,i++;i<e.length;i++){var l=e[i];if(!q.test(l))break;a+=l}if("<"===e[i]){for(var v="",u=0;i<e.length;){var s=e[i];if(")"===s&&0===u)break;if(A(s,e[i-1]))for(v+=s,i++;i<e.length;i++){var f=e[i];if(v+=f,A(f,e[i-1])&&f===s){i+=1;break}}else"("===s?u+=1:")"===s&&(u-=1),v+=s,i+=1}var o=[],c={},d=_((t=x(v),void 0,k(0,t.length,t)),null,0,r,o,c);if(r=d.variable,d.isStatic){var b=N(d.prelude,d.node,r,o,c);r=b.variable,a+="(function(){if("+b.variableStatic+"===undefined){"+o[0].variablePart+"}return "+b.variableStatic+";})()"}else a+="(function(){"+(0===o.length?"":"if("+o[0].variableStatic+"===undefined){"+o.map(function(e){return e.variablePart}).join("")+"}")+d.prelude+"return "+d.node+";})()"}}else if(A(n,e[i-1]))for(a+=n,i++;i<e.length;i++){var h=e[i];if(a+=h,A(h,e[i-1])&&h===n){i+=1;break}}else if("/"===n&&"/"===e[i+1])for(;i<e.length;i++){var p=e[i];if(a+=p,"\n"===p){i+=1;break}}else if("/"===n&&"*"===e[i+1])for(a+="/*",i+=2;i<e.length;i++){var g=e[i];if(a+=g,"*"===g&&"/"===e[i+1]){a+="/",i+=2;break}}else a+=n,i+=1}var m="",S="";if(0!==r){m+="var ";for(var w=0;w<r;w++)m+=S+"m"+w,S=",";m+=";"}return m+a}var u=[];document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("script");l=document.querySelector("head");for(var t=0;t<e.length;t++){var a=e[t];"text/moon"===a.type&&u.push(a)}!function t(){if(0!==u.length){var a=u.shift(),r=a.src;if(0===r.length){var e=document.createElement("script");e.text=v(a.text),l.appendChild(e),a.parentNode.removeChild(a),t()}else{var i=new XMLHttpRequest;i.addEventListener("load",function(){if(i.readyState===i.DONE){if(0===i.status||200===i.status){var e=document.createElement("script");e.text=v(this.responseText),l.appendChild(e)}else n('Failed to load script with source "'+r+'" and status '+i.status+".");a.parentNode.removeChild(a),t()}}),i.open("GET",r,!0),i.send()}}}()})}();