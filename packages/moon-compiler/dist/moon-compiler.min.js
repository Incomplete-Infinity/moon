/**
 * Moon Compiler v1.0.0-beta.4
 * Copyright 2016-2019 Kabir Shah
 * Released under the MIT License
 * https://kbrsh.github.io/moon
 */
!function(n,t){"undefined"==typeof module?n.MoonCompiler=t():module.exports=t()}(this,(function(){"use strict";var n=/[@$\w.]/;function t(n,t){this.expected=n,this.index=t}var e=function(n,e){return function(r,i){var o=e(r,i);return o instanceof t?o:[{type:n,value:o[0]},o[1]]}},r=function(n,e){return e===n.length?["EOF",e]:new t("EOF",e)},i=function(n,e){return e<n.length?[n[e],e+1]:new t("any",e)},o=function(n){return function(e,r){var i=e[r];return i===n?[i,r+1]:new t('"'+n+'"',r)}},u=function(n){return function(e,r){var i=e[r];return void 0!==i&&n.test(i)?[i,r+1]:new t(n.toString(),r)}},a=function(n){return function(e,r){var i=r+n.length;return e.slice(r,i)===n?[n,i]:new t('"'+n+'"',r)}},f=function(n){return function(e,r){if(r<e.length){for(var i=0;i<n.length;i++){var o=n[i];if(e.slice(r,r+o.length)===o)return new t('not "'+o+'"',r)}return[e[r],r+1]}return new t("not "+n.map(JSON.stringify).join(", "),r)}},s=function(n,e){return function(r,i){var o=n(r,i);if(o instanceof t){var u=e(r,i);return u instanceof t&&o.index>u.index?o:u}return o}},c=function(n,e){return function(r,i){var o=n(r,i);if(o instanceof t)return o;var u=e(r,o[1]);return u instanceof t?u:[[o[0],u[0]],u[1]]}},v=function(n){return function(e,r){for(var i=[],o=0;o<n.length;o++){var u=n[o](e,r);if(u instanceof t)return u;i.push(u[0]),r=u[1]}return[i,r]}},l=function(n){return function(e,r){for(var i=new t("alternates",-1),o=0;o<n.length;o++){var u=n[o](e,r);if(!(u instanceof t))return u;u.index>i.index&&(i=u)}return i}},p=function(n){return function(e,r){for(var i,o=[];!((i=n(e,r))instanceof t);)o.push(i[0]),r=i[1];return[o,r]}},d=function(n){return function(e,r){var i=[],o=n(e,r);if(o instanceof t)return o;for(i.push(o[0]),r=o[1];!((o=n(e,r))instanceof t);)i.push(o[0]),r=o[1];return[i,r]}},h={whitespaces:p(l([o(" "),o("\t"),o("\n")])),value:function(t,e){return l([d(u(n)),v([o('"'),p(s(c(o("\\"),i),f(['"']))),o('"')]),v([o("'"),p(s(c(o("\\"),i),f(["'"]))),o("'")]),v([o("`"),p(s(c(o("\\"),i),f(["`"]))),o("`")]),v([o("("),h.expression,o(")")]),v([o("["),h.expression,o("]")]),v([o("{"),h.expression,o("}")])])(t,e)},attributes:function(n,t){return e("attributes",p(v([h.value,o("="),h.value,h.whitespaces])))(n,t)},text:e("text",d(s(c(o("\\"),i),f(["{","<"])))),interpolation:function(n,t){return e("interpolation",v([o("{"),h.expression,o("}")]))(n,t)},node:function(n,t){return e("node",v([o("<"),h.whitespaces,h.value,h.whitespaces,a("#>")]))(n,t)},nodeData:function(n,t){return e("nodeData",v([o("<"),h.whitespaces,h.value,h.whitespaces,s(c(h.value,a("/>")),c(h.attributes,a("/>")))]))(n,t)},nodeDataChildren:function(n,t){return e("nodeDataChildren",v([o("<"),h.whitespaces,h.value,h.whitespaces,h.attributes,o(">"),p(l([h.node,h.nodeData,h.nodeDataChildren,h.text,h.interpolation])),a("</"),p(f([">"])),o(">")]))(n,t)},expression:function(n,t){return p(l([v([a("//"),p(f(["\n"]))]),v([a("/*"),p(f(["*/"])),a("*/")]),v([o("/"),d(s(c(o("\\"),f(["\n"])),f(["/","\n"]))),o("/")]),h.value,h.node,h.nodeData,h.nodeDataChildren,o("/"),o("<"),d(f(["/",'"',"'","`","(",")","[","]","{","}","<"]))]))(n,t)},main:function(n,t){return c(h.expression,r)(n,t)}};function x(n){return h.main(n,0)}x.Error=t;var g=/^\s+$/,w=/(^|[^\\])("|\n)/g;function m(n){var t=n.type;if("string"==typeof n)return n;if(Array.isArray(n)){for(var e="",r=0;r<n.length;r++)e+=m(n[r]);return e}if("attributes"===t){for(var i=n.value,o="",u="",a=0;a<i.length;a++){var f=i[a];o+=u+'"'+m(f[0])+'":'+m(f[2])+m(f[3]),u=","}return{output:o,separator:u}}if("text"===t){var s=m(n.value),c=g.test(s)&&-1!==s.indexOf("\n");return{output:c?s:'Moon.view.m.text({data:"'+s.replace(w,(function(n,t,e){return t+('"'===e?'\\"':"\\n\\\n")}))+'"})',isWhitespace:c}}if("interpolation"===t)return"Moon.view.m.text({data:"+m(n.value[1])+"})";if("node"===t){var v=n.value;return m(v[1])+m(v[2])+m(v[3])}if("nodeData"===t){var l=n.value,p=l[4][0],d=m(p);return""+m(l[1])+m(l[2])+m(l[3])+"("+("attributes"===p.type?"{"+d.output+"}":d)+")"}if("nodeDataChildren"===t){var h,x=n.value,M=m(x[4]),y=x[6],D=y.length;if(0===D)h="";else{var b="";h=M.separator+"children:[";for(var C=0;C<D;C++){var E=y[C],O=m(E);"text"===E.type?O.isWhitespace?h+=O.output:(h+=b+O.output,b=","):(h+=b+O,b=",")}h+="]"}return""+m(x[1])+m(x[2])+m(x[3])+"({"+M.output+h+"})"}}function M(n,t){for(var e=t-n.length,r=0;r<e;r++)n=" "+n;return n}return{compile:function(n){var t,e=x(n);return e instanceof x.Error&&(t="Invalid input to parser.\n\nAttempted to parse input.\n\nExpected "+e.expected+".\n\nReceived:\n\n"+function(n,t){for(var e=n.split("\n"),r=1,i=1,o=0;o<n.length;o++){var u=n[o];if(o===t){var a=r-1,f=r+1,s=Math.max(Math.floor(Math.log10(a)+1),Math.floor(Math.log10(r)+1),Math.floor(Math.log10(f)+1))+2,c=e[a-1],v=e[r-1],l=e[f-1],p="";return void 0!==c&&(p+=M(a+"| ",s)+c+"\n"),p+=M(r+"| ",s)+v+"\n"+M("| ",s)+M("^",i),void 0!==l&&(p+="\n"+M(f+"| ",s)+l),p}"\n"===u?(r+=1,i=1):i+=1}}(n,e.index),console.error("[Moon] ERROR: "+t)),m(e[0][0])},generate:m,parse:x,version:"1.0.0-beta.4"}}));