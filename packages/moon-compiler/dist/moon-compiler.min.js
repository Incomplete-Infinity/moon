/**
 * Moon Compiler v1.0.0-beta.7
 * Copyright 2016-2020 Kabir Shah
 * Released under the MIT License
 * https://moonjs.org
 */
!function(n,t){"undefined"==typeof module?n.MoonCompiler=t():module.exports=t()}(this,(function(){"use strict";var n=/[$\w.]/;function t(n,t){this.expected=n,this.index=t}var e=function(n,e){return function(r,o){var a=e(r,o);return a instanceof t?a:[{type:n,value:a[0]},a[1]]}},r=function(n,e){return e===n.length?["EOF",e]:new t("EOF",e)},o=function(n,e){return e<n.length?[n[e],e+1]:new t("any",e)},a=function(n){return function(e,r){var o=e[r];return o===n?[o,r+1]:new t('"'+n+'"',r)}},u=function(n){return function(e,r){var o=e[r];return void 0!==o&&n.test(o)?[o,r+1]:new t(n.toString(),r)}},i=function(n){return function(e,r){var o=r+n.length;return e.slice(r,o)===n?[n,o]:new t('"'+n+'"',r)}},f=function(n){return function(e,r){if(r<e.length){for(var o=0;o<n.length;o++){var a=n[o];if(e.slice(r,r+a.length)===a)return new t('not "'+a+'"',r)}return[e[r],r+1]}return new t("not "+n.map(JSON.stringify).join(", "),r)}},c=function(n,e){return function(r,o){var a=n(r,o);if(a instanceof t){var u=e(r,o);return u instanceof t&&a.index>u.index?a:u}return a}},s=function(n,e){return function(r,o){var a=n(r,o);if(a instanceof t)return a;var u=e(r,a[1]);return u instanceof t?u:[[a[0],u[0]],u[1]]}},v=function(n){return function(e,r){for(var o=[],a=0;a<n.length;a++){var u=n[a](e,r);if(u instanceof t)return u;o.push(u[0]),r=u[1]}return[o,r]}},l=function(n){return function(e,r){for(var o=new t("alternates",-1),a=0;a<n.length;a++){var u=n[a](e,r);if(!(u instanceof t))return u;u.index>o.index&&(o=u)}return o}},p=function(n){return function(e,r){for(var o,a=[];!((o=n(e,r))instanceof t);)a.push(o[0]),r=o[1];return[a,r]}},d=function(n){return function(e,r){var o=[],a=n(e,r);if(a instanceof t)return a;for(o.push(a[0]),r=a[1];!((a=n(e,r))instanceof t);)o.push(a[0]),r=a[1];return[o,r]}},h={comment:e("comment",v([a("#"),p(c(s(a("\\"),o),f(["#"]))),a("#")])),separator:function(n,t){return p(c(l([a(" "),a("\t"),a("\n")]),h.comment))(n,t)},value:function(t,e){return l([d(u(n)),v([a('"'),p(c(s(a("\\"),o),f(['"']))),a('"')]),v([a("'"),p(c(s(a("\\"),o),f(["'"]))),a("'")]),v([a("`"),p(c(s(a("\\"),o),f(["`"]))),a("`")]),v([a("("),h.expression,a(")")]),v([a("["),h.expression,a("]")]),v([a("{"),h.expression,a("}")])])(t,e)},attributes:function(n,t){return e("attributes",p(v([h.value,a("="),h.value,h.separator])))(n,t)},text:e("text",d(c(s(a("\\"),o),f(["{","<"])))),interpolation:function(n,t){return e("interpolation",v([a("{"),h.expression,a("}")]))(n,t)},node:function(n,t){return e("node",v([a("<"),h.separator,h.value,h.separator,i("*>")]))(n,t)},nodeData:function(n,t){return e("nodeData",v([a("<"),h.separator,h.value,h.separator,c(s(h.value,i("/>")),s(h.attributes,i("/>")))]))(n,t)},nodeDataChildren:function(n,t){return e("nodeDataChildren",v([a("<"),h.separator,h.value,h.separator,h.attributes,a(">"),p(l([h.node,h.nodeData,h.nodeDataChildren,h.text,h.interpolation])),i("</"),p(f([">"])),a(">")]))(n,t)},expression:function(n,t){return p(l([v([i("//"),p(f(["\n"]))]),v([i("/*"),p(f(["*/"])),i("*/")]),v([a("/"),d(c(s(a("\\"),f(["\n"])),f(["/","\n"]))),a("/")]),h.comment,h.value,h.node,h.nodeData,h.nodeDataChildren,a("/"),a("<"),d(f(["/","#",'"',"'","`","(",")","[","]","{","}","<"]))]))(n,t)},main:function(n,t){return s(h.expression,r)(n,t)}};function x(n){return h.main(n,0)}x.Error=t;var g=/^\s+$/,m=/(^|[^\\])("|\n)/g;function w(n){var t=n.type;if("string"==typeof n)return n;if(Array.isArray(n)){for(var e="",r=0;r<n.length;r++)e+=w(n[r]);return e}if("comment"===t)return"/*"+w(n.value[1])+"*/";if("attributes"===t){for(var o=n.value,a="",u="",i=0;i<o.length;i++){var f=o[i];a+=u+'"'+w(f[0])+'":'+w(f[2])+w(f[3]),u=","}return{output:a,separator:u}}if("text"===t){var c=w(n.value),s=g.test(c)&&-1!==c.indexOf("\n");return{output:s?c:'Moon.view.components.text({data:"'+c.replace(m,(function(n,t,e){return t+('"'===e?'\\"':"\\n\\\n")}))+'"})',isWhitespace:s}}if("interpolation"===t)return"Moon.view.components.text({data:"+w(n.value[1])+"})";if("node"===t){var v=n.value;return w(v[1])+w(v[2])+w(v[3])}if("nodeData"===t){var l=n.value,p=l[4][0],d=w(p);return""+w(l[1])+w(l[2])+w(l[3])+"("+("attributes"===p.type?"{"+d.output+"}":d)+")"}if("nodeDataChildren"===t){var h,x=n.value,M=w(x[4]),y=x[6],D=y.length;if(0===D)h="";else{var b="";h=M.separator+"children:[";for(var C=0;C<D;C++){var E=y[C],O=w(E);"text"===E.type?O.isWhitespace?h+=O.output:(h+=b+O.output,b=","):(h+=b+O,b=",")}h+="]"}return""+w(x[1])+w(x[2])+w(x[3])+"({"+M.output+h+"})"}}function M(n,t){for(var e=t-n.length,r=0;r<e;r++)n=" "+n;return n}return{compile:function(n){var t,e=x(n);return e instanceof x.Error&&(t="Invalid input to parser.\n\nAttempted to parse input.\n\nExpected "+e.expected+".\n\nReceived:\n\n"+function(n,t){for(var e=n.split("\n"),r=1,o=1,a=0;a<n.length;a++){var u=n[a];if(a===t){var i=r-1,f=r+1,c=Math.max(Math.floor(Math.log10(i)+1),Math.floor(Math.log10(r)+1),Math.floor(Math.log10(f)+1))+2,s=e[i-1],v=e[r-1],l=e[f-1],p="";return void 0!==s&&(p+=M(i+"| ",c)+s+"\n"),p+=M(r+"| ",c)+v+"\n"+M("| ",c)+M("^",o),void 0!==l&&(p+="\n"+M(f+"| ",c)+l),p}"\n"===u?(r+=1,o=1):o+=1}}(n,e.index),console.error("[Moon] ERROR: "+t)),w(e[0][0])},generate:w,parse:x,version:"1.0.0-beta.7"}}));