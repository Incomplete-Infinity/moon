<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="The minimal & fast UI library.">
		<meta name="author" content="Kabir Shah">

		<title>Moon | Data</title>

		<link rel="shortcut icon" href="../img/logo.png"/>

		<link rel="stylesheet" type="text/css" href="../css/lib/grain.css" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" />
		<link rel="stylesheet" type="text/css" href="../css/post.css" />

		<script src="../js/lib/moon.min.js"></script>

		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-70792533-14', 'auto');
			ga('send', 'pageview');
		</script>
	</head>

	<body>
		<div class="container">
			<div class="nav">
				<div class="nav-home">
					<h2 class="nav-home"><a href="../">Moon</a></h2>
				</div>

				<div class="nav-items">
					<a href="./guide.html" class="s-1">Guide</a>
					<a href="./about.html" class="s-1">About</a>
					<a href="./examples.html" class="s-1">Examples</a>
					<a href="https://github.com/kbrsh/moon" class="s-1">GitHub</a>
				</div>
			</div>
			<div class="main">
				<div class="side">
					<h6>Documentation</h6>
					<p><a href="./about.html">About</a></p>
					<p><a href="./installation.html">Installation</a></p>
					<p><a href="./guide.html">Guide</a></p>
					<p><a id="active" href="./data.html">Data</a></p>
					<p><a href="./views.html">Views</a></p>
					<p><a href="./components.html">Components</a></p>
					<p><a href="./examples.html">Examples</a></p>
				</div>
				<div class="content">
					<h1>Data</h1>
					<p>Every Moon component is a Moon instance with properties and methods that are defined in the component definition.</p>
<h3 id="root">Root</h3>
<p>The root instance is created using <code>Moon({})</code>. This invocation creates a new component constructor and initializes it.</p>
<pre><code lang="js"><span class="blue">Moon</span>({
    view: <span class="green">&quot;{foo} {bar}&quot;</span>,
    foo: <span class="orange">17</span>,
    bar: <span class="green">&quot;baz&quot;</span>,
    <span class="blue">log</span>() {
        <span class="gray">// Properties are available under <span class="green">`<span class="orange">this</span>`</span></span>
        console.<span class="blue">log</span>(<span class="orange">this</span>.foo, <span class="orange">this</span>.bar);
    }
});
</code></pre>
<p>The above instance has the user-defined properties <code>foo</code> and <code>bar</code> and the method <code>log</code>. Additionally, Moon defines builtin properties and methods on each component to provide utilities for creating, updating, and destroying it.</p>
<h3 id="create">Create</h3>
<p>To create the view and initialize all DOM elements, you use <code>instance.create(root)</code>. This method is meant to be used internally but can optionally be utilized in order to use a Moon component with an existing application.</p>
<pre><code lang="js"><span class="purple">new</span> <span class="blue">ComponentConstructor</span>().<span class="blue">create</span>(<span class="orange">document</span>.<span class="blue">getElementById</span>(<span class="green">&quot;root&quot;</span>));
</code></pre>
<h3 id="update">Update</h3>
<p>To update the view and properties of an instance you use <code>instance.update()</code>. This method updates data within the component and queues a view update.</p>
<pre><code lang="js"><span class="gray">// Queue a view update</span>
<span class="orange">this</span>.<span class="blue">update</span>();

<span class="gray">// Update one property and queue a view update</span>
<span class="orange">this</span>.<span class="blue">update</span>(<span class="green">&quot;count&quot;</span>, <span class="orange">this</span>.count + <span class="orange">1</span>);

<span class="gray">// Update multiple properties and queue a view update</span>
<span class="orange">this</span>.<span class="blue">update</span>({
    foo: <span class="green">&quot;bar&quot;</span>,
    count: <span class="orange">this</span>.count + <span class="orange">1</span>
});
</code></pre>
<h3 id="destroy">Destroy</h3>
<p>To destroy a view and remove all DOM elements from the root you use <code>instance.destroy()</code>.</p>
<pre><code lang="js"><span class="orange">this</span>.<span class="blue">destroy</span>();
</code></pre>
<h3 id="on">On</h3>
<p>To add an event listener to an instance, you use <code>instance.on(event, handler)</code>. The <code>create</code>, <code>update</code>, and <code>destroy</code> events are fired when their corresponding methods are called.</p>
<pre><code lang="js"><span class="orange">this</span>.<span class="blue">on</span>(<span class="green">&quot;create&quot;</span>, <span class="purple">function</span>() {
    console.<span class="blue">log</span>(<span class="green">&quot;Component created.&quot;</span>);
});

<span class="orange">this</span>.<span class="blue">on</span>(<span class="green">&quot;update&quot;</span>, <span class="purple">function</span>() {
    console.<span class="blue">log</span>(<span class="green">&quot;Component updated.&quot;</span>);
});

<span class="orange">this</span>.<span class="blue">on</span>(<span class="green">&quot;destroy&quot;</span>, <span class="purple">function</span>() {
    console.<span class="blue">log</span>(<span class="green">&quot;Component destroyed.&quot;</span>);
});

<span class="orange">this</span>.<span class="blue">on</span>(<span class="green">&quot;custom&quot;</span>, <span class="purple">function</span>() {
    console.<span class="blue">log</span>(<span class="green">&quot;Custom event fired.&quot;</span>);
});
</code></pre>
<h3 id="off">Off</h3>
<p>To remove an event listener from an instance, you use <code>instance.off()</code>.</p>
<pre><code lang="js"><span class="gray">// Remove all event listeners</span>
<span class="orange">this</span>.<span class="blue">off</span>();

<span class="gray">// Remove all event listeners <span class="purple">for</span> the <span class="green">&quot;custom&quot;</span> event</span>
<span class="orange">this</span>.<span class="blue">off</span>(<span class="green">&quot;custom&quot;</span>);

<span class="gray">// Remove <span class="green">`handler`</span> from the <span class="green">&quot;custom&quot;</span> event.</span>
<span class="orange">this</span>.<span class="blue">off</span>(<span class="green">&quot;custom&quot;</span>, handler);
</code></pre>
<h3 id="emit">Emit</h3>
<p>To emit an event, you use <code>instance.emit(event)</code>.</p>
<pre><code lang="js"><span class="gray">// Emit the <span class="green">&quot;custom&quot;</span> event</span>
<span class="orange">this</span>.<span class="blue">emit</span>(<span class="green">&quot;custom&quot;</span>);


<span class="gray">// Emit the <span class="green">&quot;custom&quot;</span> event with custom event data</span>
<span class="orange">this</span>.<span class="blue">emit</span>(<span class="green">&quot;custom&quot;</span>, {
    foo: <span class="green">&quot;bar&quot;</span>
});
</code></pre>
<h3 id="lifecycle">Lifecycle</h3>
<p>Rather than using <code>instance.on</code> for every lifecycle event (<code>create</code>, <code>update</code>, <code>destroy</code>), you can provide them in the component data.</p>
<pre><code lang="js"><span class="blue">Moon</span>({
    <span class="blue">onCreate</span>() {},
    <span class="blue">onUpdate</span>() {},
    <span class="blue">onDestroy</span>() {}
});
</code></pre>

				</div>
			</div>
		</div>
	</body>
</html>
